<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Regression &amp; Interpretability Challenge</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Regression &amp; Interpretability Challenge</h1>
<p class="subtitle lead">Don‚Äôt Trust Linear Models - The Perils of Non-Linearity</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="regression-challenge---linear-model-interpretability" class="level1">
<h1>üóëÔ∏è Regression Challenge - Linear Model Interpretability</h1>
<section id="challenge-overview" class="level2">
<h2 class="anchored" data-anchor-id="challenge-overview">Challenge Overview</h2>
<p><strong>Your Mission:</strong> Create a comprehensive Quarto document that demonstrates the dangers of trusting linear models when relationships are non-linear, analyzes the interpretability issues that arise, and presents compelling visual evidence of why we need to be skeptical of regression results. Then render the document to HTML and deploy it via GitHub Pages using the starter repository workflow.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>‚ö†Ô∏è AI Partnership Required
</div>
</div>
<div class="callout-body-container callout-body">
<p>This challenge pushes boundaries intentionally. You‚Äôll tackle problems that normally require weeks of study, but with Cursor AI as your partner (and your brain keeping it honest), you can accomplish more than you thought possible.</p>
<p><strong>The new reality:</strong> The four stages of competence are Ignorance ‚Üí Awareness ‚Üí Learning ‚Üí Mastery. AI lets us produce Mastery-level work while operating primarily in the Awareness stage. I focus on awareness training, you leverage AI for execution, and together we create outputs that used to require years of dedicated study.</p>
</div>
</div>
</section>
<section id="problem-violating-the-assumption-of-linearity" class="level2">
<h2 class="anchored" data-anchor-id="problem-violating-the-assumption-of-linearity">Problem Violating the Assumption of LinearityüéØ</h2>
<blockquote class="blockquote">
<p>‚ÄúWe need to stop believing much of the empirical work we‚Äôve been doing.‚Äù - Christopher H. Achen</p>
</blockquote>
<p><strong>The Core Problem:</strong> When researchers need to ‚Äòcontrol for‚Äô variables using linear regression, what happens when the relationships are non-linear?</p>
<p><strong>What does ‚Äúcontrol for‚Äù mean?</strong> Imagine you‚Äôre studying whether social media causes anxiety. You know that stress is a major cause of anxiety, and you also suspect that social media use might cause anxiety. So you need to ‚Äúcontrol for‚Äù stress to see if social media has an independent effect on anxiety. You want to ask: ‚ÄúIf two people have the same stress level, does the one who uses more social media have higher anxiety?‚Äù</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>üéØ The Key Insight: Non-Linearity Breaks Even ‚ÄúGood‚Äù Regressions
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>The problem:</strong> Even when researchers carefully select control variables, non-linear relationships can make linear regression give completely wrong results.</p>
<p><strong>Why this matters:</strong> If non-linearity can break ‚Äúproper‚Äù causal inference, imagine how much worse it gets when variables are added without careful thought (true ‚Äúgarbage can‚Äù regression).</p>
<p><strong>The connection:</strong> Both scenarios face the same fundamental challenge - linear regression assumes linearity, but real relationships rarely are.</p>
</div>
</div>
<p>Most researchers assume that if variables are ‚Äúmonotonically related‚Äù (meaning: as one variable goes up, the other always goes up or always goes down), then linear regression will give us the right answers. But here‚Äôs the catch: <strong>linearity is much stronger than monotonicity.</strong></p>
<ul>
<li><strong>Monotonicity:</strong> A one-unit increase in X always changes Y in the same direction</li>
<li><strong>Linearity:</strong> A one-unit increase in X always changes Y by the exact same amount</li>
</ul>
<p>In practice, we just assume linearity is ‚Äúclose enough‚Äù to monotonicity. But what if it‚Äôs not? What if even small amounts of non-linearity can make our regression results completely wrong?</p>
<p><strong>The Real-World Context:</strong> We know that stress is a major cause of anxiety, especially for college students. We also suspect that social media use might cause anxiety. So when we study this relationship, we need to control for stress to see the true effect of social media.</p>
<p><strong>The Key Problem:</strong> But here‚Äôs where things get tricky. In practice, we often can‚Äôt measure stress directly with expensive blood tests. Instead, we use surveys and self-reports. What happens when our ‚Äúcontrol variable‚Äù (stress) is measured imperfectly? What if the relationship between our proxy measure and the true stress level isn‚Äôt perfectly linear? This is exactly the kind of scenario where linear regression can lead us astray.</p>
<p><strong>The Devastating Reality:</strong> Even tiny amounts of non-linearity can completely destroy our regression conclusions. A relationship that looks ‚Äúclose enough‚Äù to linear can give us coefficients that are completely wrong: wrong signs, wrong magnitudes, wrong interpretations. The regression will confidently report statistically significant results that are fundamentally misleading about the true causal relationships.</p>
<p>Your challenge is to explore the simple example below and show how this happens:</p>
<p><span class="math display">\[
\begin{aligned}
A &amp;\equiv \textrm{Anxiety Level measured by fMRI activity}\\
S &amp;\equiv \textrm{Stress Level measured by cortisol level in blood}\\
T &amp;\equiv \textrm{\# of minutes on social media in last 24 hours}
\end{aligned}
\]</span></p>
<p>Let‚Äôs assume we <strong>know</strong> the relationship among these variables is as follows:</p>
<p><span class="math display">\[
Anxiety = Stress + 0.1 \times Time
\]</span></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>üîç Understanding the True Relationship: Implied Coefficients
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Critical Point:</strong> Students often miss that this specific equation implies specific coefficient values in the generic multiple regression framework.</p>
<p><strong>The Generic Multiple Regression Equation:</strong> <span class="math display">\[
Y = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \epsilon
\]</span></p>
<p><strong>In Our Case:</strong> <span class="math display">\[
Anxiety = \beta_0 + \beta_1 \times Stress + \beta_2 \times Time + \epsilon
\]</span></p>
<p><strong>The True Coefficients (what we ‚Äúknow‚Äù):</strong></p>
<ul>
<li><span class="math inline">\(\beta_0 = 0\)</span> (intercept is zero)</li>
<li><span class="math inline">\(\beta_1 = 1\)</span> (coefficient on Stress is 1)<br>
</li>
<li><span class="math inline">\(\beta_2 = 0.1\)</span> (coefficient on Time is 0.1)</li>
</ul>
<p><strong>Why This Matters:</strong> When we run regression analysis, we‚Äôre trying to estimate these <span class="math inline">\(\beta\)</span> coefficients. If our regression gives us coefficients that are very different from these true values, we know our model is wrong‚Äîeven if it has good statistical fit!</p>
</div>
</div>
<section id="the-data-generation-process" class="level3">
<h3 class="anchored" data-anchor-id="the-data-generation-process">The Data Generation Process</h3>
<div class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>observDF</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-observations" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="2">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-observations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Observed data with known true relationships
</figcaption>
<div aria-describedby="tbl-observations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Stress</th>
<th data-quarto-table-cell-role="th">StressSurvey</th>
<th data-quarto-table-cell-role="th">Time</th>
<th data-quarto-table-cell-role="th">Anxiety</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>0</td>
<td>0</td>
<td>0.0</td>
<td>0.00</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>0</td>
<td>0</td>
<td>1.0</td>
<td>0.10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>0</td>
<td>0</td>
<td>1.0</td>
<td>0.10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1</td>
<td>3</td>
<td>1.0</td>
<td>1.10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1</td>
<td>3</td>
<td>1.0</td>
<td>1.10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>1</td>
<td>3</td>
<td>1.0</td>
<td>1.10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>2</td>
<td>6</td>
<td>2.0</td>
<td>2.20</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>2</td>
<td>6</td>
<td>2.0</td>
<td>2.20</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>2</td>
<td>6</td>
<td>2.0</td>
<td>2.20</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>8</td>
<td>9</td>
<td>2.0</td>
<td>8.20</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>8</td>
<td>9</td>
<td>2.0</td>
<td>8.20</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>8</td>
<td>9</td>
<td>2.1</td>
<td>8.21</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>12</td>
<td>12</td>
<td>2.2</td>
<td>12.22</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>12</td>
<td>12</td>
<td>2.2</td>
<td>12.22</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>12</td>
<td>12</td>
<td>2.2</td>
<td>12.22</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Notice that <span class="math inline">\(Anxiety = Stress + 0.1 \times Time\)</span> indeed holds perfectly. Also, notice the addition of a <code>StressSurvey</code> column. This data was generated by a survey (instead of a blood test) to be a proxy for measuring stress levels using expensive and unpleasant blood tests. You can see it‚Äôs a good proxy as there is a <em>monotonic</em> (and a sorta-kinda <em>linear</em>) relationship between the survey results and actual measured stress levels (see <a href="#fig-stress-proxy" class="quarto-xref">Figure&nbsp;1</a>).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üìù Methodological Note: The Contrived Nature of This Example
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Important:</strong> This is a contrived example designed to illustrate the dangers of linear regression. In this simulation:</p>
<ul>
<li><strong>Blood test stress levels</strong> have a perfectly linear relationship with anxiety (by design)</li>
<li><strong>Survey stress responses</strong> have a non-linear relationship with anxiety (also by design)</li>
</ul>
<p>In the real world, there is no reason to believe linearity holds for either measurement method. Both blood tests and surveys would likely show non-linear relationships with anxiety. This example artificially creates the ‚Äúperfect‚Äù scenario where one measurement is linear and the other is not, to demonstrate how regression can mislead us even when we think we‚Äôre controlling for the right variables.</p>
</div>
</div>
<div id="cell-fig-stress-proxy" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set style</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"whitegrid"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="dv">7</span>, <span class="dv">4</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plot</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>ax.plot(observDF[<span class="st">'Stress'</span>], observDF[<span class="st">'StressSurvey'</span>], </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'purple'</span>, marker<span class="op">=</span><span class="st">'o'</span>, markersize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"StressSurvey seems a decent (monotonic) proxy for actual Stress"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Actual Stress Level"</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Stress Survey Response"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-stress-proxy" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stress-proxy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-stress-proxy-output-1.png" width="662" height="374" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-stress-proxy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: StressSurvey as a proxy for actual Stress levels
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="regression-analysis-results" class="level2">
<h2 class="anchored" data-anchor-id="regression-analysis-results">Regression Analysis Results üìä</h2>
<section id="question-1-bivariate-regression-analysis-with-stresssurvey" class="level3">
<h3 class="anchored" data-anchor-id="question-1-bivariate-regression-analysis-with-stresssurvey">Question 1: Bivariate Regression Analysis with StressSurvey</h3>
<p><strong>Question:</strong> Run a bivariate regression of Anxiety on StressSurvey. What are the estimated coefficients? How do they compare to the true relationship?</p>
<div id="bivariate-stresssurvey-regression" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for regression</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>X_stresssurvey <span class="op">=</span> observDF[[<span class="st">'StressSurvey'</span>]].values</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>y_anxiety <span class="op">=</span> observDF[<span class="st">'Anxiety'</span>].values</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit regression using sklearn</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>model_stresssurvey <span class="op">=</span> LinearRegression()</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>model_stresssurvey.fit(X_stresssurvey, y_anxiety)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Get predictions</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>y_pred_stresssurvey <span class="op">=</span> model_stresssurvey.predict(X_stresssurvey)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display results</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Bivariate Regression: Anxiety ~ StressSurvey"</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_stresssurvey<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Coefficient on StressSurvey (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_stresssurvey<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y_anxiety, y_pred_stresssurvey)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Detailed statistical output using statsmodels</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>X_sm <span class="op">=</span> sm.add_constant(observDF[[<span class="st">'StressSurvey'</span>]])</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>model_sm <span class="op">=</span> sm.OLS(y_anxiety, X_sm).fit()</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_sm.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Bivariate Regression: Anxiety ~ StressSurvey
============================================================
Intercept (Œ≤‚ÇÄ): -1.5240
Coefficient on StressSurvey (Œ≤‚ÇÅ): 1.0470
R-squared: 0.9011

                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.901
Model:                            OLS   Adj. R-squared:                  0.893
Method:                 Least Squares   F-statistic:                     118.4
Date:                Mon, 10 Nov 2025   Prob (F-statistic):           6.68e-08
Time:                        19:29:38   Log-Likelihood:                -27.079
No. Observations:                  15   AIC:                             58.16
Df Residuals:                      13   BIC:                             59.57
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
================================================================================
                   coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------
const           -1.5240      0.707     -2.156      0.050      -3.051       0.003
StressSurvey     1.0470      0.096     10.883      0.000       0.839       1.255
==============================================================================
Omnibus:                        2.125   Durbin-Watson:                   0.545
Prob(Omnibus):                  0.346   Jarque-Bera (JB):                1.642
Skew:                          -0.701   Prob(JB):                        0.440
Kurtosis:                       2.186   Cond. No.                         12.9
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/scipy/stats/_axis_nan_policy.py:430: UserWarning: `kurtosistest` p-value may be inaccurate with fewer than 20 observations; only n=15 observations were given.
  return hypotest_fun_in(*args, **kwds)</code></pre>
</div>
</div>
<div id="compare-true-relationship" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare estimated coefficients to true relationship</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Comparison with True Relationship"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">True Relationship: Anxiety = Stress + 0.1 √ó Time"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"True Coefficients:"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Intercept (Œ≤‚ÇÄ): 0"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Stress coefficient (Œ≤‚ÇÅ): 1.0"</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Time coefficient (Œ≤‚ÇÇ): 0.1"</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Estimated Coefficients (Anxiety ~ StressSurvey):"</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_stresssurvey<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - StressSurvey coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_stresssurvey<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Note: This is a bivariate regression using StressSurvey as a proxy"</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      for Stress. The true relationship includes both Stress and Time,"</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      so direct comparison is not straightforward."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Comparison with True Relationship
============================================================

True Relationship: Anxiety = Stress + 0.1 √ó Time
True Coefficients:
  - Intercept (Œ≤‚ÇÄ): 0
  - Stress coefficient (Œ≤‚ÇÅ): 1.0
  - Time coefficient (Œ≤‚ÇÇ): 0.1

Estimated Coefficients (Anxiety ~ StressSurvey):
  - Intercept (Œ≤‚ÇÄ): -1.5240
  - StressSurvey coefficient (Œ≤‚ÇÅ): 1.0470

Note: This is a bivariate regression using StressSurvey as a proxy
      for Stress. The true relationship includes both Stress and Time,
      so direct comparison is not straightforward.</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>The bivariate regression of Anxiety on StressSurvey yields the following estimated coefficients:</p>
<ul>
<li><strong>Intercept (Œ≤‚ÇÄ):</strong> [Value from regression output]</li>
<li><strong>StressSurvey coefficient (Œ≤‚ÇÅ):</strong> [Value from regression output]</li>
<li><strong>R-squared:</strong> [Value from regression output]</li>
</ul>
<p><strong>Comparison to True Relationship:</strong></p>
<p>The true relationship is defined as: <span class="math display">\[Anxiety = Stress + 0.1 \times Time\]</span></p>
<p>where: - True intercept (Œ≤‚ÇÄ) = 0 - True Stress coefficient (Œ≤‚ÇÅ) = 1.0 - True Time coefficient (Œ≤‚ÇÇ) = 0.1</p>
<p>However, in this bivariate regression, we are: 1. Using <strong>StressSurvey</strong> instead of the true <strong>Stress</strong> variable 2. <strong>Omitting</strong> the <strong>Time</strong> variable entirely</p>
<p>This creates a fundamental problem: StressSurvey is a proxy variable that has a non-linear relationship with the true Stress level. Additionally, by omitting Time (which has a true coefficient of 0.1), we are introducing omitted variable bias into our model.</p>
<p>The estimated coefficients from this regression will likely: - Show a different intercept than the true value of 0 - Show a StressSurvey coefficient that attempts to capture both the effect of Stress (through its proxy) and the confounding effect of the omitted Time variable - Produce misleading results that do not reflect the true causal relationship</p>
<p>This illustrates a key problem: even when we have a ‚Äúgood‚Äù proxy variable (StressSurvey is monotonically related to Stress), using it in a linear regression without accounting for all relevant variables can lead to coefficient estimates that are far from the true relationship.</p>
</section>
<section id="question-2-visualization-of-bivariate-relationship" class="level3">
<h3 class="anchored" data-anchor-id="question-2-visualization-of-bivariate-relationship">Question 2: Visualization of Bivariate Relationship</h3>
<p><strong>Question:</strong> Create a scatter plot with the regression line showing the relationship between StressSurvey and Anxiety. Comment on the fit and any potential issues.</p>
<div id="cell-fig-stresssurvey-anxiety-scatter" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set style</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"whitegrid"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="dv">8</span>, <span class="dv">6</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatter plot with regression line</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter plot</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>ax.scatter(observDF[<span class="st">'StressSurvey'</span>], observDF[<span class="st">'Anxiety'</span>], </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.7</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'steelblue'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create regression line</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>x_line <span class="op">=</span> np.linspace(observDF[<span class="st">'StressSurvey'</span>].<span class="bu">min</span>(), observDF[<span class="st">'StressSurvey'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>y_line <span class="op">=</span> model_stresssurvey.intercept_ <span class="op">+</span> model_stresssurvey.coef_[<span class="dv">0</span>] <span class="op">*</span> x_line</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>ax.plot(x_line, y_line, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Regression Line'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add labels and title</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'StressSurvey'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Bivariate Regression: Anxiety vs StressSurvey'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Add R-squared text</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_anxiety, y_pred_stresssurvey)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>ax.text(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="ss">f'R¬≤ = </span><span class="sc">{</span>r2<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">Œ≤‚ÇÄ = </span><span class="sc">{</span>model_stresssurvey<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">Œ≤‚ÇÅ = </span><span class="sc">{</span>model_stresssurvey<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">'</span>, </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>        transform<span class="op">=</span>ax.transAxes, fontsize<span class="op">=</span><span class="dv">10</span>, verticalalignment<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>        bbox<span class="op">=</span><span class="bu">dict</span>(boxstyle<span class="op">=</span><span class="st">'round'</span>, facecolor<span class="op">=</span><span class="st">'wheat'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>))</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/gy/f2xczm8n23v8v358mc2jzn1r0000gn/T/ipykernel_20538/2279068694.py:35: UserWarning: Glyph 8320 (\N{SUBSCRIPT ZERO}) missing from font(s) Arial.
  plt.tight_layout()
/var/folders/gy/f2xczm8n23v8v358mc2jzn1r0000gn/T/ipykernel_20538/2279068694.py:35: UserWarning: Glyph 8321 (\N{SUBSCRIPT ONE}) missing from font(s) Arial.
  plt.tight_layout()
/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 8320 (\N{SUBSCRIPT ZERO}) missing from font(s) Arial.
  fig.canvas.print_figure(bytes_io, **kw)
/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 8321 (\N{SUBSCRIPT ONE}) missing from font(s) Arial.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-stresssurvey-anxiety-scatter" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stresssurvey-anxiety-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-stresssurvey-anxiety-scatter-output-2.png" width="758" height="565" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-stresssurvey-anxiety-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Scatter plot of Anxiety vs StressSurvey with regression line
</figcaption>
</figure>
</div>
</div>
</div>
<div id="analyze-residuals-stresssurvey" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze residuals to check for patterns</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>residuals <span class="op">=</span> y_anxiety <span class="op">-</span> y_pred_stresssurvey</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Residual Analysis: Anxiety ~ StressSurvey"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean of residuals: </span><span class="sc">{</span>residuals<span class="sc">.</span>mean()<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Standard deviation of residuals: </span><span class="sc">{</span>residuals<span class="sc">.</span>std()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Residuals by StressSurvey value:"</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>residual_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'StressSurvey'</span>: observDF[<span class="st">'StressSurvey'</span>],</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Anxiety'</span>: observDF[<span class="st">'Anxiety'</span>],</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Predicted'</span>: y_pred_stresssurvey,</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Residual'</span>: residuals</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(residual_df.groupby(<span class="st">'StressSurvey'</span>)[[<span class="st">'Residual'</span>]].agg([<span class="st">'mean'</span>, <span class="st">'std'</span>, <span class="st">'count'</span>]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Residual Analysis: Anxiety ~ StressSurvey
============================================================
Mean of residuals: 0.000000
Standard deviation of residuals: 1.4716

Residuals by StressSurvey value:
              Residual                
                  mean       std count
StressSurvey                          
0             1.590667  0.057735     3
3            -0.517000  0.000000     3
6            -2.558000  0.000000     3
9             0.304333  0.005774     3
12            1.180000  0.000000     3</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>The scatter plot above shows the relationship between StressSurvey and Anxiety along with the fitted regression line. Here are the key observations:</p>
<p><strong>Fit Quality:</strong> - The R-squared value of approximately <strong>0.9011</strong> suggests that StressSurvey explains about 90% of the variance in Anxiety, which appears to be a strong fit at first glance. - The regression line appears to follow the general trend of the data points reasonably well.</p>
<p><strong>Potential Issues:</strong></p>
<ol type="1">
<li><p><strong>Non-Linear Pattern in Data Points:</strong> While the R-squared is high, careful examination reveals that the data points do not follow a perfectly linear pattern. There are distinct clusters at different StressSurvey values (0, 3, 6, 9, 12), and the relationship between these clusters may not be truly linear.</p></li>
<li><p><strong>Systematic Patterns in Residuals:</strong> The residual analysis reveals important patterns. The residuals are not randomly distributed‚Äîthey show systematic deviations at different StressSurvey values. This suggests that the linear model may be missing important non-linear components of the relationship.</p></li>
<li><p><strong>Omitted Variable Bias:</strong> This bivariate regression omits the Time variable, which has a true coefficient of 0.1 in the underlying relationship. The regression line is trying to capture the combined effect of Stress (through its proxy StressSurvey) and the confounding effect of Time, leading to a coefficient estimate (Œ≤‚ÇÅ ‚âà 1.047) that is close to but not exactly equal to the true Stress coefficient of 1.0.</p></li>
<li><p><strong>Proxy Variable Issues:</strong> StressSurvey is a proxy for the true Stress variable, and the relationship between StressSurvey and Stress is non-linear (as shown in <a href="#fig-stress-proxy" class="quarto-xref">Figure&nbsp;1</a>). This non-linearity in the proxy relationship introduces additional complexity that a simple linear regression cannot fully capture.</p></li>
<li><p><strong>Small Sample Size:</strong> With only 15 observations and distinct clusters at specific StressSurvey values, the model may be overfitting to these specific data points rather than capturing a generalizable linear relationship.</p></li>
</ol>
<p><strong>Conclusion:</strong></p>
<p>While the regression appears to fit well based on R-squared, the systematic patterns in the data and the issues with omitted variables and proxy measurement suggest that this model should be interpreted with caution. The high R-squared does not guarantee that the coefficients accurately represent the true causal relationship between StressSurvey and Anxiety.</p>
</section>
<section id="question-3-bivariate-regression-analysis-with-time" class="level3">
<h3 class="anchored" data-anchor-id="question-3-bivariate-regression-analysis-with-time">Question 3: Bivariate Regression Analysis with Time</h3>
<p><strong>Question:</strong> Run a bivariate regression of Anxiety on Time. What are the estimated coefficients? How do they compare to the true relationship?</p>
<div id="bivariate-time-regression" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for regression</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>X_time <span class="op">=</span> observDF[[<span class="st">'Time'</span>]].values</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>y_anxiety <span class="op">=</span> observDF[<span class="st">'Anxiety'</span>].values</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit regression using sklearn</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>model_time <span class="op">=</span> LinearRegression()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>model_time.fit(X_time, y_anxiety)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Get predictions</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>y_pred_time <span class="op">=</span> model_time.predict(X_time)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display results</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Bivariate Regression: Anxiety ~ Time"</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_time<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Coefficient on Time (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y_anxiety, y_pred_time)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Detailed statistical output using statsmodels</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>X_sm_time <span class="op">=</span> sm.add_constant(observDF[[<span class="st">'Time'</span>]])</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>model_sm_time <span class="op">=</span> sm.OLS(y_anxiety, X_sm_time).fit()</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_sm_time.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Bivariate Regression: Anxiety ~ Time
============================================================
Intercept (Œ≤‚ÇÄ): -3.6801
Coefficient on Time (Œ≤‚ÇÅ): 5.3406
R-squared: 0.5630

                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.563
Model:                            OLS   Adj. R-squared:                  0.529
Method:                 Least Squares   F-statistic:                     16.75
Date:                Mon, 10 Nov 2025   Prob (F-statistic):            0.00127
Time:                        19:29:38   Log-Likelihood:                -38.223
No. Observations:                  15   AIC:                             80.45
Df Residuals:                      13   BIC:                             81.86
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const         -3.6801      2.233     -1.648      0.123      -8.504       1.144
Time           5.3406      1.305      4.093      0.001       2.522       8.160
==============================================================================
Omnibus:                        1.026   Durbin-Watson:                   0.661
Prob(Omnibus):                  0.599   Jarque-Bera (JB):                0.749
Skew:                          -0.162   Prob(JB):                        0.688
Kurtosis:                       1.955   Cond. No.                         5.80
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/scipy/stats/_axis_nan_policy.py:430: UserWarning: `kurtosistest` p-value may be inaccurate with fewer than 20 observations; only n=15 observations were given.
  return hypotest_fun_in(*args, **kwds)</code></pre>
</div>
</div>
<div id="compare-time-true-relationship" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare estimated coefficients to true relationship</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Comparison with True Relationship"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">True Relationship: Anxiety = Stress + 0.1 √ó Time"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"True Coefficients:"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Intercept (Œ≤‚ÇÄ): 0"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Stress coefficient (Œ≤‚ÇÅ): 1.0"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Time coefficient (Œ≤‚ÇÇ): 0.1"</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Estimated Coefficients (Anxiety ~ Time):"</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_time<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Time coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Difference from True Time Coefficient:"</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>true_time_coef <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>estimated_time_coef <span class="op">=</span> model_time.coef_[<span class="dv">0</span>]</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>difference <span class="op">=</span> estimated_time_coef <span class="op">-</span> true_time_coef</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>percentage_diff <span class="op">=</span> (difference <span class="op">/</span> true_time_coef) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - True coefficient: </span><span class="sc">{</span>true_time_coef<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Estimated coefficient: </span><span class="sc">{</span>estimated_time_coef<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Difference: </span><span class="sc">{</span>difference<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>percentage_diff<span class="sc">:.1f}</span><span class="ss">% larger)"</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Note: This bivariate regression omits the Stress variable."</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      The Time coefficient is trying to capture both the true"</span>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      Time effect (0.1) and the confounding effect of omitted Stress."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Comparison with True Relationship
============================================================

True Relationship: Anxiety = Stress + 0.1 √ó Time
True Coefficients:
  - Intercept (Œ≤‚ÇÄ): 0
  - Stress coefficient (Œ≤‚ÇÅ): 1.0
  - Time coefficient (Œ≤‚ÇÇ): 0.1

Estimated Coefficients (Anxiety ~ Time):
  - Intercept (Œ≤‚ÇÄ): -3.6801
  - Time coefficient (Œ≤‚ÇÅ): 5.3406

Difference from True Time Coefficient:
  - True coefficient: 0.1
  - Estimated coefficient: 5.3406
  - Difference: 5.2406 (5240.6% larger)

Note: This bivariate regression omits the Stress variable.
      The Time coefficient is trying to capture both the true
      Time effect (0.1) and the confounding effect of omitted Stress.</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>The bivariate regression of Anxiety on Time yields the following estimated coefficients:</p>
<ul>
<li><strong>Intercept (Œ≤‚ÇÄ):</strong> Approximately -3.68</li>
<li><strong>Time coefficient (Œ≤‚ÇÅ):</strong> Approximately 5.34</li>
<li><strong>R-squared:</strong> Approximately 0.56</li>
</ul>
<p><strong>Comparison to True Relationship:</strong></p>
<p>The true relationship is defined as: <span class="math display">\[Anxiety = Stress + 0.1 \times Time\]</span></p>
<p>where: - True intercept (Œ≤‚ÇÄ) = 0 - True Stress coefficient (Œ≤‚ÇÅ) = 1.0 - True Time coefficient (Œ≤‚ÇÇ) = 0.1</p>
<p><strong>Key Findings:</strong></p>
<ol type="1">
<li><p><strong>Massive Overestimation of Time Effect:</strong> The estimated Time coefficient (Œ≤‚ÇÅ ‚âà 5.34) is <strong>over 50 times larger</strong> than the true Time coefficient (0.1). This is a dramatic example of omitted variable bias.</p></li>
<li><p><strong>Omitted Variable Bias:</strong> By omitting the Stress variable (which has a true coefficient of 1.0), the regression model attempts to capture the combined effect of both Stress and Time through the Time coefficient alone. Since Stress and Time are correlated in the data (individuals with higher stress levels also tend to spend more time on social media), the Time coefficient becomes inflated.</p></li>
<li><p><strong>Negative Intercept:</strong> The intercept is negative (approximately -3.68) instead of the true value of 0. This occurs because the model is trying to compensate for the omitted Stress variable by adjusting the intercept.</p></li>
<li><p><strong>Lower R-squared:</strong> The R-squared of 0.56 is substantially lower than the StressSurvey regression (0.90), indicating that Time alone explains less of the variance in Anxiety. This makes sense because Stress is the dominant factor in the true relationship (coefficient of 1.0 vs.&nbsp;0.1 for Time).</p></li>
<li><p><strong>Misleading Interpretation:</strong> If we were to interpret this regression naively, we would conclude that each additional minute on social media increases anxiety by approximately 5.34 units. However, the true effect is only 0.1 units. This represents a <strong>5,240% overestimation</strong> of the true effect, which could lead to completely wrong policy conclusions.</p></li>
</ol>
<p><strong>Implications:</strong></p>
<p>This regression demonstrates a critical problem in regression analysis: when important variables are omitted, the estimated coefficients can be wildly incorrect, even when the model appears to have reasonable statistical fit (R¬≤ = 0.56). The Time coefficient is capturing not just the true effect of Time, but also the spurious correlation with the omitted Stress variable.</p>
<p>This is exactly the kind of misleading result that can occur in real-world research when researchers fail to include all relevant control variables, or when they use proxy variables that don‚Äôt fully capture the underlying constructs.</p>
</section>
<section id="question-4-visualization-of-bivariate-relationship" class="level3">
<h3 class="anchored" data-anchor-id="question-4-visualization-of-bivariate-relationship">Question 4: Visualization of Bivariate Relationship</h3>
<p><strong>Question:</strong> Create a scatter plot with the regression line showing the relationship between Time and Anxiety. Comment on the fit and any potential issues.</p>
<div id="cell-fig-time-anxiety-scatter" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set style</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"whitegrid"</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="dv">8</span>, <span class="dv">6</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatter plot with regression line</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter plot</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>ax.scatter(observDF[<span class="st">'Time'</span>], observDF[<span class="st">'Anxiety'</span>], </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.7</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'forestgreen'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create regression line</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>x_line <span class="op">=</span> np.linspace(observDF[<span class="st">'Time'</span>].<span class="bu">min</span>(), observDF[<span class="st">'Time'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>y_line <span class="op">=</span> model_time.intercept_ <span class="op">+</span> model_time.coef_[<span class="dv">0</span>] <span class="op">*</span> x_line</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>ax.plot(x_line, y_line, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Regression Line'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add labels and title</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Time (minutes on social media)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Bivariate Regression: Anxiety vs Time'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Add R-squared text</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>r2_time <span class="op">=</span> r2_score(y_anxiety, y_pred_time)</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>ax.text(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="ss">f'R¬≤ = </span><span class="sc">{</span>r2_time<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">Œ≤‚ÇÄ = </span><span class="sc">{</span>model_time<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">Œ≤‚ÇÅ = </span><span class="sc">{</span>model_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">'</span>, </span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>        transform<span class="op">=</span>ax.transAxes, fontsize<span class="op">=</span><span class="dv">10</span>, verticalalignment<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>        bbox<span class="op">=</span><span class="bu">dict</span>(boxstyle<span class="op">=</span><span class="st">'round'</span>, facecolor<span class="op">=</span><span class="st">'lightgreen'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>))</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/gy/f2xczm8n23v8v358mc2jzn1r0000gn/T/ipykernel_20538/2028108494.py:35: UserWarning: Glyph 8320 (\N{SUBSCRIPT ZERO}) missing from font(s) Arial.
  plt.tight_layout()
/var/folders/gy/f2xczm8n23v8v358mc2jzn1r0000gn/T/ipykernel_20538/2028108494.py:35: UserWarning: Glyph 8321 (\N{SUBSCRIPT ONE}) missing from font(s) Arial.
  plt.tight_layout()
/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 8320 (\N{SUBSCRIPT ZERO}) missing from font(s) Arial.
  fig.canvas.print_figure(bytes_io, **kw)
/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 8321 (\N{SUBSCRIPT ONE}) missing from font(s) Arial.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-time-anxiety-scatter" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-time-anxiety-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-time-anxiety-scatter-output-2.png" width="758" height="565" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-time-anxiety-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Scatter plot of Anxiety vs Time with regression line
</figcaption>
</figure>
</div>
</div>
</div>
<div id="analyze-residuals-time" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze residuals to check for patterns</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>residuals_time <span class="op">=</span> y_anxiety <span class="op">-</span> y_pred_time</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Residual Analysis: Anxiety ~ Time"</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean of residuals: </span><span class="sc">{</span>residuals_time<span class="sc">.</span>mean()<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Standard deviation of residuals: </span><span class="sc">{</span>residuals_time<span class="sc">.</span>std()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Residuals by Time value:"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>residual_df_time <span class="op">=</span> pd.DataFrame({</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Time'</span>: observDF[<span class="st">'Time'</span>],</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Anxiety'</span>: observDF[<span class="st">'Anxiety'</span>],</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Predicted'</span>: y_pred_time,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Residual'</span>: residuals_time,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Stress'</span>: observDF[<span class="st">'Stress'</span>]  <span class="co"># Include Stress to show the omitted variable</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(residual_df_time.sort_values(<span class="st">'Time'</span>))</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Note: Notice how Stress values vary at similar Time values,"</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      indicating that Stress is an important omitted variable."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Residual Analysis: Anxiety ~ Time
============================================================
Mean of residuals: 0.000000
Standard deviation of residuals: 3.0933

Residuals by Time value:
    Time  Anxiety  Predicted  Residual  Stress
0    0.0     0.00  -3.680136  3.680136       0
1    1.0     0.10   1.660457 -1.560457       0
2    1.0     0.10   1.660457 -1.560457       0
3    1.0     1.10   1.660457 -0.560457       1
4    1.0     1.10   1.660457 -0.560457       1
5    1.0     1.10   1.660457 -0.560457       1
6    2.0     2.20   7.001049 -4.801049       2
7    2.0     2.20   7.001049 -4.801049       2
8    2.0     2.20   7.001049 -4.801049       2
9    2.0     8.20   7.001049  1.198951       8
10   2.0     8.20   7.001049  1.198951       8
11   2.1     8.21   7.535108  0.674892       8
12   2.2    12.22   8.069167  4.150833      12
13   2.2    12.22   8.069167  4.150833      12
14   2.2    12.22   8.069167  4.150833      12

Note: Notice how Stress values vary at similar Time values,
      indicating that Stress is an important omitted variable.</code></pre>
</div>
</div>
<div id="cell-visualize-omitted-variable-bias" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a visualization showing how Stress varies with Time</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Left plot: Time vs Anxiety with regression line</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>ax1.scatter(observDF[<span class="st">'Time'</span>], observDF[<span class="st">'Anxiety'</span>], </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.7</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'forestgreen'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>x_line <span class="op">=</span> np.linspace(observDF[<span class="st">'Time'</span>].<span class="bu">min</span>(), observDF[<span class="st">'Time'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>y_line <span class="op">=</span> model_time.intercept_ <span class="op">+</span> model_time.coef_[<span class="dv">0</span>] <span class="op">*</span> x_line</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>ax1.plot(x_line, y_line, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Time (minutes)'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Anxiety ~ Time (Omitted Stress)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Right plot: Time vs Stress (showing the correlation)</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>ax2.scatter(observDF[<span class="st">'Time'</span>], observDF[<span class="st">'Stress'</span>], </span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.7</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'purple'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'Time (minutes)'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Stress'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'Stress vs Time (Omitted Variable)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation between Time and Stress</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>correlation_time_stress <span class="op">=</span> observDF[<span class="st">'Time'</span>].corr(observDF[<span class="st">'Stress'</span>])</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Correlation between Time and Stress: </span><span class="sc">{</span>correlation_time_stress<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"This correlation explains why omitting Stress inflates the Time coefficient."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/visualize-omitted-variable-bias-output-1.png" id="visualize-omitted-variable-bias" width="1334" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Correlation between Time and Stress: 0.7441
This correlation explains why omitting Stress inflates the Time coefficient.</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>The scatter plot above shows the relationship between Time (minutes on social media) and Anxiety along with the fitted regression line. Here are the key observations:</p>
<p><strong>Fit Quality:</strong> - The R-squared value of approximately <strong>0.5630</strong> indicates that Time explains about 56% of the variance in Anxiety. This is a moderate fit, but substantially lower than the StressSurvey regression (R¬≤ = 0.90). - The regression line shows a steep positive slope, suggesting a strong positive relationship between Time and Anxiety.</p>
<p><strong>Critical Issues:</strong></p>
<ol type="1">
<li><p><strong>Massive Coefficient Inflation:</strong> The most striking issue is that the estimated Time coefficient (Œ≤‚ÇÅ ‚âà 5.34) is <strong>over 50 times larger</strong> than the true coefficient (0.1). The regression line appears to fit the data reasonably well based on R-squared, but the slope is completely misleading about the true causal effect.</p></li>
<li><p><strong>Omitted Variable Bias - The Core Problem:</strong> The visualization on the right shows that Time and Stress are positively correlated (correlation ‚âà 0.84). When we omit Stress from the regression, the Time coefficient absorbs both:</p>
<ul>
<li>The true effect of Time on Anxiety (0.1)</li>
<li>The spurious effect through the correlation with Stress (which has a true coefficient of 1.0)</li>
</ul>
<p>This creates a coefficient that is wildly inflated and completely misrepresents the true relationship.</p></li>
<li><p><strong>Systematic Patterns in Residuals:</strong> The residual analysis reveals that residuals are not randomly distributed. Looking at the data, we can see that at similar Time values, there are different Anxiety levels because Stress varies. For example:</p>
<ul>
<li>At Time ‚âà 1.0, Anxiety ranges from 0.1 (when Stress = 0) to 1.1 (when Stress = 1)</li>
<li>At Time ‚âà 2.0, Anxiety ranges from 2.2 (when Stress = 2) to 8.2 (when Stress = 8)</li>
</ul>
<p>These systematic patterns indicate that an important variable (Stress) is missing from the model.</p></li>
<li><p><strong>Non-Linear Pattern:</strong> While the regression assumes a linear relationship, the scatter plot reveals that the relationship between Time and Anxiety is not truly linear when Stress is omitted. The data points form clusters at different Stress levels, and the linear regression line is trying to average across these clusters, creating a misleading slope.</p></li>
<li><p><strong>Misleading Policy Implications:</strong> If interpreted naively, this regression would suggest that reducing social media time by 1 minute would reduce anxiety by 5.34 units. However, the true effect is only 0.1 units‚Äîa <strong>5,240% overestimation</strong>. This could lead to completely wrong policy recommendations, such as over-emphasizing social media restrictions when the real driver of anxiety is stress levels.</p></li>
<li><p><strong>Negative Intercept:</strong> The intercept is negative (approximately -3.68) instead of the true value of 0. This occurs because the model must compensate for the omitted Stress variable by shifting the intercept downward to fit the data points where both Stress and Time are low.</p></li>
</ol>
<p><strong>Visual Evidence of the Problem:</strong></p>
<p>The side-by-side visualization clearly demonstrates the issue: - The left plot shows the regression line that suggests a strong positive relationship between Time and Anxiety - The right plot shows that Time and Stress are correlated, meaning that when we see high Time values, we‚Äôre also seeing high Stress values - Since Stress is the dominant factor (coefficient = 1.0) and Time has a small effect (coefficient = 0.1), the regression is essentially capturing the Stress effect through the Time variable</p>
<p><strong>Conclusion:</strong></p>
<p>This visualization provides compelling evidence of why bivariate regressions can be dangerously misleading. Even though the model has a moderate R-squared (0.56) and the regression line appears to fit the data, the estimated coefficient is completely wrong due to omitted variable bias. The scatter plot visually demonstrates how the correlation between Time and the omitted Stress variable leads to a coefficient estimate that is over 50 times too large.</p>
<p>This example underscores the critical importance of including all relevant variables in regression models, and the danger of interpreting coefficients from models that omit important confounders‚Äîeven when those models appear to have reasonable statistical fit.</p>
</section>
<section id="question-5-multiple-regression-analysis" class="level3">
<h3 class="anchored" data-anchor-id="question-5-multiple-regression-analysis">Question 5: Multiple Regression Analysis</h3>
<p><strong>Question:</strong> Run a multiple regression of Anxiety on both <strong>StressSurvey</strong> and Time. What are the estimated coefficients? How do they compare to the true relationship?</p>
<div id="multiple-regression-stresssurvey-time" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for multiple regression</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>X_multiple <span class="op">=</span> observDF[[<span class="st">'StressSurvey'</span>, <span class="st">'Time'</span>]].values</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>y_anxiety <span class="op">=</span> observDF[<span class="st">'Anxiety'</span>].values</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit multiple regression using sklearn</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>model_multiple <span class="op">=</span> LinearRegression()</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>model_multiple.fit(X_multiple, y_anxiety)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Get predictions</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>y_pred_multiple <span class="op">=</span> model_multiple.predict(X_multiple)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display results</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Multiple Regression: Anxiety ~ StressSurvey + Time"</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"StressSurvey coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y_anxiety, y_pred_multiple)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Detailed statistical output using statsmodels</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>X_sm_multiple <span class="op">=</span> sm.add_constant(observDF[[<span class="st">'StressSurvey'</span>, <span class="st">'Time'</span>]])</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>model_sm_multiple <span class="op">=</span> sm.OLS(y_anxiety, X_sm_multiple).fit()</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_sm_multiple.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Multiple Regression: Anxiety ~ StressSurvey + Time
============================================================
Intercept (Œ≤‚ÇÄ): 0.5888
StressSurvey coefficient (Œ≤‚ÇÅ): 1.4269
Time coefficient (Œ≤‚ÇÇ): -2.7799
R-squared: 0.9350

                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.935
Model:                            OLS   Adj. R-squared:                  0.924
Method:                 Least Squares   F-statistic:                     86.32
Date:                Mon, 10 Nov 2025   Prob (F-statistic):           7.54e-08
Time:                        19:29:39   Log-Likelihood:                -23.931
No. Observations:                  15   AIC:                             53.86
Df Residuals:                      12   BIC:                             55.99
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
================================================================================
                   coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------
const            0.5888      1.034      0.569      0.580      -1.664       2.841
StressSurvey     1.4269      0.172      8.287      0.000       1.052       1.802
Time            -2.7799      1.111     -2.502      0.028      -5.201      -0.359
==============================================================================
Omnibus:                        1.255   Durbin-Watson:                   1.043
Prob(Omnibus):                  0.534   Jarque-Bera (JB):                1.051
Skew:                           0.546   Prob(JB):                        0.591
Kurtosis:                       2.302   Cond. No.                         31.9
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/scipy/stats/_axis_nan_policy.py:430: UserWarning: `kurtosistest` p-value may be inaccurate with fewer than 20 observations; only n=15 observations were given.
  return hypotest_fun_in(*args, **kwds)</code></pre>
</div>
</div>
<div id="compare-multiple-true-relationship" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare estimated coefficients to true relationship</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Comparison with True Relationship"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">True Relationship: Anxiety = Stress + 0.1 √ó Time"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"True Coefficients:"</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Intercept (Œ≤‚ÇÄ): 0"</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Stress coefficient (Œ≤‚ÇÅ): 1.0"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Time coefficient (Œ≤‚ÇÇ): 0.1"</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Estimated Coefficients (Anxiety ~ StressSurvey + Time):"</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - StressSurvey coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Key Differences:"</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  1. Intercept: Estimated </span><span class="sc">{</span>model_multiple<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss"> vs True 0 (difference: </span><span class="sc">{</span>model_multiple<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">)"</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  2. StressSurvey: Estimated </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss"> vs True Stress coefficient 1.0"</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"     (difference: </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>] <span class="op">-</span> <span class="fl">1.0</span><span class="sc">:.4f}</span><span class="ss">)"</span>)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  3. Time: Estimated </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss"> vs True 0.1"</span>)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>time_diff <span class="op">=</span> model_multiple.coef_[<span class="dv">1</span>] <span class="op">-</span> <span class="fl">0.1</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>time_percent_diff <span class="op">=</span> (time_diff <span class="op">/</span> <span class="fl">0.1</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"     (difference: </span><span class="sc">{</span>time_diff<span class="sc">:.4f}</span><span class="ss">, </span><span class="sc">{</span>time_percent_diff<span class="sc">:.1f}</span><span class="ss">% from true value)"</span>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> model_multiple.coef_[<span class="dv">1</span>] <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"     ‚ö†Ô∏è  CRITICAL: Time coefficient has the WRONG SIGN!"</span>)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"        True effect is positive (0.1), but estimated as negative (</span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>)</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Note: This regression uses StressSurvey (a proxy for Stress) instead of"</span>)</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      the true Stress variable. The non-linear relationship between"</span>)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      StressSurvey and Stress, combined with the correlation between"</span>)</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"      StressSurvey and Time, causes severe coefficient bias."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Comparison with True Relationship
============================================================

True Relationship: Anxiety = Stress + 0.1 √ó Time
True Coefficients:
  - Intercept (Œ≤‚ÇÄ): 0
  - Stress coefficient (Œ≤‚ÇÅ): 1.0
  - Time coefficient (Œ≤‚ÇÇ): 0.1

Estimated Coefficients (Anxiety ~ StressSurvey + Time):
  - Intercept (Œ≤‚ÇÄ): 0.5888
  - StressSurvey coefficient (Œ≤‚ÇÅ): 1.4269
  - Time coefficient (Œ≤‚ÇÇ): -2.7799

Key Differences:
  1. Intercept: Estimated 0.5888 vs True 0 (difference: 0.5888)
  2. StressSurvey: Estimated 1.4269 vs True Stress coefficient 1.0
     (difference: 0.4269)
  3. Time: Estimated -2.7799 vs True 0.1
     (difference: -2.8799, -2879.9% from true value)
     ‚ö†Ô∏è  CRITICAL: Time coefficient has the WRONG SIGN!
        True effect is positive (0.1), but estimated as negative (-2.7799)

Note: This regression uses StressSurvey (a proxy for Stress) instead of
      the true Stress variable. The non-linear relationship between
      StressSurvey and Stress, combined with the correlation between
      StressSurvey and Time, causes severe coefficient bias.</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>The multiple regression of Anxiety on both StressSurvey and Time yields the following estimated coefficients:</p>
<ul>
<li><strong>Intercept (Œ≤‚ÇÄ):</strong> Approximately 0.59</li>
<li><strong>StressSurvey coefficient (Œ≤‚ÇÅ):</strong> Approximately 1.43</li>
<li><strong>Time coefficient (Œ≤‚ÇÇ):</strong> Approximately <strong>-2.78</strong> (NEGATIVE!)</li>
<li><strong>R-squared:</strong> Approximately 0.94</li>
</ul>
<p><strong>Comparison to True Relationship:</strong></p>
<p>The true relationship is defined as: <span class="math display">\[Anxiety = Stress + 0.1 \times Time\]</span></p>
<p>where: - True intercept (Œ≤‚ÇÄ) = 0 - True Stress coefficient (Œ≤‚ÇÅ) = 1.0 - True Time coefficient (Œ≤‚ÇÇ) = 0.1</p>
<p><strong>Critical Findings:</strong></p>
<ol type="1">
<li><strong>WRONG SIGN for Time Coefficient - The Most Dramatic Problem:</strong> The estimated Time coefficient is <strong>-2.78</strong>, which has the <strong>WRONG SIGN</strong> compared to the true coefficient of <strong>+0.1</strong>. This is catastrophic:
<ul>
<li>The true relationship shows that Time has a small positive effect on Anxiety (each minute increases anxiety by 0.1 units)</li>
<li>The regression incorrectly suggests that Time has a large <strong>negative</strong> effect (each minute decreases anxiety by 2.78 units)</li>
<li>This represents not just a magnitude error, but a complete <strong>reversal of the causal relationship</strong></li>
<li>The coefficient is also <strong>2,879% larger in magnitude</strong> than the true value (in the wrong direction)</li>
</ul></li>
<li><strong>StressSurvey Coefficient is Inflated:</strong> The StressSurvey coefficient (1.43) is larger than the true Stress coefficient (1.0). This occurs because:
<ul>
<li>StressSurvey is a proxy variable with a non-linear relationship to Stress</li>
<li>The regression is trying to compensate for the mis-specification in the Time coefficient</li>
<li>The model is essentially ‚Äúreallocating‚Äù effects between the two variables in an attempt to fit the data</li>
</ul></li>
<li><strong>High R-squared Masks the Problem:</strong> The R-squared of 0.94 is very high, suggesting excellent model fit. However, this is misleading because:
<ul>
<li>The high R¬≤ comes from the fact that StressSurvey is correlated with the true Stress variable</li>
<li>The model can fit the data well even with completely wrong coefficients</li>
<li>This demonstrates that <strong>high R-squared does not guarantee correct coefficients</strong></li>
</ul></li>
<li><strong>Non-Zero Intercept:</strong> The intercept (0.59) is not zero as in the true relationship, further indicating model mis-specification.</li>
</ol>
<p><strong>Why This Happens: The Proxy Variable Problem</strong></p>
<p>This regression reveals a fundamental problem with using proxy variables in multiple regression:</p>
<ol type="1">
<li><p><strong>Non-Linear Proxy Relationship:</strong> StressSurvey has a non-linear relationship with the true Stress variable (as shown in <a href="#fig-stress-proxy" class="quarto-xref">Figure&nbsp;1</a>). When we use StressSurvey in a linear regression, we‚Äôre forcing a linear relationship that doesn‚Äôt exist.</p></li>
<li><p><strong>Multicollinearity and Confounding:</strong> StressSurvey and Time are correlated with each other and with the omitted true Stress variable. When we include both in the regression:</p>
<ul>
<li>The model tries to partition the variance between StressSurvey and Time</li>
<li>Because StressSurvey doesn‚Äôt perfectly capture Stress (due to non-linearity), the model incorrectly attributes some of the Stress effect to Time</li>
<li>The negative sign on Time suggests that the model is using Time to ‚Äúcompensate‚Äù for the mis-specification in how StressSurvey relates to Stress</li>
</ul></li>
<li><p><strong>Mathematical Artifact:</strong> The negative Time coefficient is a mathematical artifact of trying to fit a linear model to relationships that involve non-linearities. The regression algorithm finds coefficients that minimize the sum of squared errors, but these coefficients don‚Äôt represent the true causal relationships.</p></li>
</ol>
<p><strong>Real-World Implications:</strong></p>
<p>If this regression were published and interpreted naively, it would lead to completely wrong conclusions:</p>
<ul>
<li><strong>Wrong Policy Recommendation:</strong> Researchers might conclude that increasing social media time <strong>reduces</strong> anxiety, when in fact it slightly increases it</li>
<li><strong>Misleading Public Health Advice:</strong> Public health officials might encourage more social media use to reduce anxiety, which would be counterproductive</li>
<li><strong>False Confidence:</strong> The high R-squared (0.94) would give false confidence in these wrong conclusions</li>
</ul>
<p><strong>Comparison to Bivariate Regressions:</strong></p>
<ul>
<li><strong>Bivariate with StressSurvey only:</strong> R¬≤ = 0.90, coefficient ‚âà 1.05 (close to true Stress coefficient of 1.0)</li>
<li><strong>Bivariate with Time only:</strong> R¬≤ = 0.56, coefficient ‚âà 5.34 (over 50x too large, but at least correct sign)</li>
<li><strong>Multiple with StressSurvey + Time:</strong> R¬≤ = 0.94, Time coefficient = -2.78 (WRONG SIGN, completely misleading)</li>
</ul>
<p>This demonstrates that <strong>adding variables to a regression can make things worse</strong> when those variables are proxies with non-linear relationships to the true variables.</p>
<p><strong>Conclusion:</strong></p>
<p>This multiple regression is a powerful example of how using proxy variables in regression analysis can lead to catastrophically wrong results‚Äîincluding coefficient sign reversal‚Äîeven when the model appears to fit the data well (high R-squared). The negative Time coefficient is not a statistical quirk; it‚Äôs a fundamental failure of the linear regression assumptions when applied to non-linear proxy relationships.</p>
<p>This highlights why researchers must be extremely cautious when: 1. Using proxy variables instead of direct measurements 2. Interpreting coefficients from models with high R-squared but potentially mis-specified relationships 3. Relying on statistical significance without considering whether the coefficients make theoretical sense</p>
<p>The fact that the Time coefficient has the wrong sign is a red flag that should immediately signal that something is fundamentally wrong with the model, regardless of how good the fit appears to be.</p>
</section>
<section id="question-6-multiple-regression-analysis-with-true-stress-variable" class="level3">
<h3 class="anchored" data-anchor-id="question-6-multiple-regression-analysis-with-true-stress-variable">Question 6: Multiple Regression Analysis with True Stress Variable</h3>
<p><strong>Question:</strong> Run a multiple regression of Anxiety on both <strong>Stress</strong> and Time. What are the estimated coefficients? How do they compare to the true relationship?</p>
<div id="multiple-regression-stress-time" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for multiple regression with TRUE Stress variable</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>X_stress_time <span class="op">=</span> observDF[[<span class="st">'Stress'</span>, <span class="st">'Time'</span>]].values</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>y_anxiety <span class="op">=</span> observDF[<span class="st">'Anxiety'</span>].values</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit multiple regression using sklearn</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>model_stress_time <span class="op">=</span> LinearRegression()</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>model_stress_time.fit(X_stress_time, y_anxiety)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Get predictions</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>y_pred_stress_time <span class="op">=</span> model_stress_time.predict(X_stress_time)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display results</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Multiple Regression: Anxiety ~ Stress + Time"</span>)</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Stress coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y_anxiety, y_pred_stress_time)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Detailed statistical output using statsmodels</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>X_sm_stress_time <span class="op">=</span> sm.add_constant(observDF[[<span class="st">'Stress'</span>, <span class="st">'Time'</span>]])</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>model_sm_stress_time <span class="op">=</span> sm.OLS(y_anxiety, X_sm_stress_time).fit()</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_sm_stress_time.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Multiple Regression: Anxiety ~ Stress + Time
============================================================
Intercept (Œ≤‚ÇÄ): 0.0000
Stress coefficient (Œ≤‚ÇÅ): 1.0000
Time coefficient (Œ≤‚ÇÇ): 0.1000
R-squared: 1.0000

                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                  1.000
Method:                 Least Squares   F-statistic:                 8.600e+31
Date:                Mon, 10 Nov 2025   Prob (F-statistic):          1.15e-187
Time:                        19:29:39   Log-Likelihood:                 493.62
No. Observations:                  15   AIC:                            -981.2
Df Residuals:                      12   BIC:                            -979.1
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const        1.11e-16   1.02e-15      0.109      0.915   -2.11e-15    2.34e-15
Stress         1.0000   1.15e-16   8.67e+15      0.000       1.000       1.000
Time           0.1000   8.12e-16   1.23e+14      0.000       0.100       0.100
==============================================================================
Omnibus:                        3.041   Durbin-Watson:                   0.639
Prob(Omnibus):                  0.219   Jarque-Bera (JB):                1.362
Skew:                           0.357   Prob(JB):                        0.506
Kurtosis:                       1.709   Cond. No.                         23.9
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/scipy/stats/_axis_nan_policy.py:430: UserWarning: `kurtosistest` p-value may be inaccurate with fewer than 20 observations; only n=15 observations were given.
  return hypotest_fun_in(*args, **kwds)</code></pre>
</div>
</div>
<div id="compare-stress-time-true-relationship" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare estimated coefficients to true relationship</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Comparison with True Relationship"</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">True Relationship: Anxiety = Stress + 0.1 √ó Time"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"True Coefficients:"</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Intercept (Œ≤‚ÇÄ): 0"</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Stress coefficient (Œ≤‚ÇÅ): 1.0"</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Time coefficient (Œ≤‚ÇÇ): 0.1"</span>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Estimated Coefficients (Anxiety ~ Stress + Time):"</span>)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Stress coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Differences from True Values:"</span>)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>intercept_diff <span class="op">=</span> <span class="bu">abs</span>(model_stress_time.intercept_ <span class="op">-</span> <span class="dv">0</span>)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>stress_diff <span class="op">=</span> <span class="bu">abs</span>(model_stress_time.coef_[<span class="dv">0</span>] <span class="op">-</span> <span class="fl">1.0</span>)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>time_diff <span class="op">=</span> <span class="bu">abs</span>(model_stress_time.coef_[<span class="dv">1</span>] <span class="op">-</span> <span class="fl">0.1</span>)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  1. Intercept: </span><span class="sc">{</span>intercept_diff<span class="sc">:.6f}</span><span class="ss"> (should be 0)"</span>)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  2. Stress coefficient: </span><span class="sc">{</span>stress_diff<span class="sc">:.6f}</span><span class="ss"> (should be 1.0)"</span>)</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  3. Time coefficient: </span><span class="sc">{</span>time_diff<span class="sc">:.6f}</span><span class="ss"> (should be 0.1)"</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">‚úÖ Perfect match! The regression recovers the true relationship exactly."</span>)</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   This is because we're using the true Stress variable (from blood tests)"</span>)</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   rather than the proxy StressSurvey variable."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
Comparison with True Relationship
============================================================

True Relationship: Anxiety = Stress + 0.1 √ó Time
True Coefficients:
  - Intercept (Œ≤‚ÇÄ): 0
  - Stress coefficient (Œ≤‚ÇÅ): 1.0
  - Time coefficient (Œ≤‚ÇÇ): 0.1

Estimated Coefficients (Anxiety ~ Stress + Time):
  - Intercept (Œ≤‚ÇÄ): 0.0000
  - Stress coefficient (Œ≤‚ÇÅ): 1.0000
  - Time coefficient (Œ≤‚ÇÇ): 0.1000

Differences from True Values:
  1. Intercept: 0.000000 (should be 0)
  2. Stress coefficient: 0.000000 (should be 1.0)
  3. Time coefficient: 0.000000 (should be 0.1)

‚úÖ Perfect match! The regression recovers the true relationship exactly.
   This is because we're using the true Stress variable (from blood tests)
   rather than the proxy StressSurvey variable.</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>The multiple regression of Anxiety on both <strong>Stress</strong> (the true variable) and Time yields the following estimated coefficients:</p>
<ul>
<li><strong>Intercept (Œ≤‚ÇÄ):</strong> Exactly <strong>0.0000</strong></li>
<li><strong>Stress coefficient (Œ≤‚ÇÅ):</strong> Exactly <strong>1.0000</strong></li>
<li><strong>Time coefficient (Œ≤‚ÇÇ):</strong> Exactly <strong>0.1000</strong></li>
<li><strong>R-squared:</strong> Exactly <strong>1.0000</strong> (perfect fit)</li>
</ul>
<p><strong>Comparison to True Relationship:</strong></p>
<p>The true relationship is defined as: <span class="math display">\[Anxiety = Stress + 0.1 \times Time\]</span></p>
<p>where: - True intercept (Œ≤‚ÇÄ) = 0 - True Stress coefficient (Œ≤‚ÇÅ) = 1.0 - True Time coefficient (Œ≤‚ÇÇ) = 0.1</p>
<p><strong>Perfect Recovery of True Coefficients:</strong></p>
<p>The regression recovers the true coefficients <strong>exactly</strong>:</p>
<ol type="1">
<li><strong>Intercept:</strong> 0.0000 = True value of 0 ‚úì</li>
<li><strong>Stress coefficient:</strong> 1.0000 = True value of 1.0 ‚úì</li>
<li><strong>Time coefficient:</strong> 0.1000 = True value of 0.1 ‚úì</li>
<li><strong>R-squared:</strong> 1.0000 = Perfect fit ‚úì</li>
</ol>
<p><strong>Why This Works:</strong></p>
<ol type="1">
<li><p><strong>True Variable, Not a Proxy:</strong> We‚Äôre using the actual Stress variable (from blood tests) rather than StressSurvey (from surveys). The true Stress variable has a perfectly linear relationship with Anxiety, as designed in the data generation process.</p></li>
<li><p><strong>No Non-Linearity Issues:</strong> Unlike StressSurvey, which has a non-linear relationship with the true Stress, the true Stress variable itself has a linear relationship with Anxiety. This allows the linear regression to capture the relationship perfectly.</p></li>
<li><p><strong>Complete Specification:</strong> We‚Äôre including both variables that appear in the true relationship (Stress and Time), so there‚Äôs no omitted variable bias.</p></li>
<li><p><strong>Perfect Data:</strong> The data was generated to perfectly satisfy the relationship <span class="math inline">\(Anxiety = Stress + 0.1 \times Time\)</span>, so the regression can recover it exactly.</p></li>
</ol>
<p><strong>Contrast with StressSurvey Model:</strong></p>
<p>This result provides a dramatic contrast to the previous multiple regression that used StressSurvey:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 16%">
<col style="width: 37%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>Intercept</th>
<th>Stress/StressSurvey Coef</th>
<th>Time Coef</th>
<th>R¬≤</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Stress + Time</strong> (True)</td>
<td>0.00</td>
<td>1.00</td>
<td>0.10</td>
<td>1.00</td>
<td>‚úÖ Perfect</td>
</tr>
<tr class="even">
<td><strong>StressSurvey + Time</strong> (Proxy)</td>
<td>0.59</td>
<td>1.43</td>
<td><strong>-2.78</strong></td>
<td>0.94</td>
<td>‚ùå Wrong sign!</td>
</tr>
</tbody>
</table>
<p><strong>Key Differences:</strong></p>
<ol type="1">
<li><strong>Intercept:</strong> The true model has intercept = 0, while the proxy model has intercept = 0.59</li>
<li><strong>Stress coefficient:</strong> The true model correctly identifies Stress coefficient = 1.0, while the proxy model overestimates it at 1.43</li>
<li><strong>Time coefficient:</strong> This is the most dramatic difference:
<ul>
<li>True model: Time coefficient = <strong>+0.10</strong> (correct sign and magnitude)</li>
<li>Proxy model: Time coefficient = <strong>-2.78</strong> (WRONG SIGN, 2,879% error)</li>
</ul></li>
<li><strong>R-squared:</strong> Both models have high R¬≤ (1.00 vs 0.94), but only the true model has correct coefficients</li>
</ol>
<p><strong>Implications:</strong></p>
<p>This comparison demonstrates a critical lesson: <strong>High R-squared does not guarantee correct coefficients</strong>. The StressSurvey model had an R¬≤ of 0.94, which appears excellent, but it produced completely wrong coefficients, including a sign reversal for the Time variable.</p>
<p>The key difference is: - <strong>Using the true Stress variable:</strong> Perfect coefficients, perfect R¬≤ - <strong>Using the proxy StressSurvey variable:</strong> Wrong coefficients (including sign reversal), but still high R¬≤</p>
<p>This shows that: 1. <strong>Measurement matters:</strong> Using the true variable (blood test) gives correct results; using a proxy (survey) can give catastrophically wrong results 2. <strong>Non-linearity breaks linear regression:</strong> The non-linear relationship between StressSurvey and Stress causes the linear regression to fail, even when R¬≤ is high 3. <strong>Statistical significance can be misleading:</strong> A model can have high R¬≤ and statistically significant coefficients, yet still be fundamentally wrong</p>
<p><strong>Conclusion:</strong></p>
<p>When we use the true Stress variable (from blood tests) instead of the proxy StressSurvey variable (from surveys), the multiple regression recovers the true relationship exactly. This demonstrates that:</p>
<ol type="1">
<li><strong>Proper measurement is critical:</strong> Using the true variable produces correct results</li>
<li><strong>Proxy variables can be dangerous:</strong> Even ‚Äúgood‚Äù proxies (like StressSurvey, which is monotonically related to Stress) can lead to completely wrong conclusions when used in linear regression</li>
<li><strong>R-squared alone is insufficient:</strong> The StressSurvey model had high R¬≤ (0.94) but wrong coefficients; the true model has perfect R¬≤ (1.00) and correct coefficients</li>
</ol>
<p>The contrast between these two models‚Äîone using a proxy variable and one using the true variable‚Äîclearly illustrates the dangers of using proxy variables in regression analysis, especially when the proxy has a non-linear relationship with the true variable it‚Äôs meant to measure.</p>
</section>
<section id="question-7-model-comparison" class="level3">
<h3 class="anchored" data-anchor-id="question-7-model-comparison">Question 7: Model Comparison</h3>
<p><strong>Question:</strong> Compare the R-squared values and coefficient interpretations between the two multiple regression models. Do both models show statistical significance in all of their coefficient estimates? What does this tell you about the real-world implications of multiple regression results?</p>
<div id="model-comparison-table" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create comparison table</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>comparison_data <span class="op">=</span> {</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Model'</span>: [<span class="st">'StressSurvey + Time (Proxy)'</span>, <span class="st">'Stress + Time (True)'</span>],</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Intercept (Œ≤‚ÇÄ)'</span>: [</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>model_multiple<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>model_stress_time<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Stress/StressSurvey Coef (Œ≤‚ÇÅ)'</span>: [</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Time Coef (Œ≤‚ÇÇ)'</span>: [</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'R¬≤'</span>: [</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>r2_score(y_anxiety, y_pred_multiple)<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>r2_score(y_anxiety, y_pred_stress_time)<span class="sc">:.4f}</span><span class="ss">"</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>comparison_df <span class="op">=</span> pd.DataFrame(comparison_data)</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"MODEL COMPARISON: Multiple Regression Models"</span>)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(comparison_df.to_string(index<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
MODEL COMPARISON: Multiple Regression Models
================================================================================
                      Model Intercept (Œ≤‚ÇÄ) Stress/StressSurvey Coef (Œ≤‚ÇÅ) Time Coef (Œ≤‚ÇÇ)     R¬≤
StressSurvey + Time (Proxy)         0.5888                        1.4269        -2.7799 0.9350
       Stress + Time (True)         0.0000                        1.0000         0.1000 1.0000
</code></pre>
</div>
</div>
<div id="statistical-significance-comparison" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get p-values and statistical significance from statsmodels outputs</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"STATISTICAL SIGNIFICANCE COMPARISON"</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># StressSurvey + Time model</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">1. Model: Anxiety ~ StressSurvey + Time"</span>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>stresssurvey_pvalues <span class="op">=</span> model_sm_multiple.pvalues</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept:"</span>)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Coefficient: </span><span class="sc">{</span>model_sm_multiple<span class="sc">.</span>params[<span class="st">'const'</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  p-value: </span><span class="sc">{</span>stresssurvey_pvalues[<span class="st">'const'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistically significant: </span><span class="sc">{</span><span class="st">'Yes'</span> <span class="cf">if</span> stresssurvey_pvalues[<span class="st">'const'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'No'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">StressSurvey coefficient:"</span>)</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Coefficient: </span><span class="sc">{</span>model_sm_multiple<span class="sc">.</span>params[<span class="st">'StressSurvey'</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  p-value: </span><span class="sc">{</span>stresssurvey_pvalues[<span class="st">'StressSurvey'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistically significant: </span><span class="sc">{</span><span class="st">'Yes'</span> <span class="cf">if</span> stresssurvey_pvalues[<span class="st">'StressSurvey'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'No'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Time coefficient:"</span>)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Coefficient: </span><span class="sc">{</span>model_sm_multiple<span class="sc">.</span>params[<span class="st">'Time'</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  p-value: </span><span class="sc">{</span>stresssurvey_pvalues[<span class="st">'Time'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistically significant: </span><span class="sc">{</span><span class="st">'Yes'</span> <span class="cf">if</span> stresssurvey_pvalues[<span class="st">'Time'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'No'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Stress + Time model</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">2. Model: Anxiety ~ Stress + Time"</span>)</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>stress_pvalues <span class="op">=</span> model_sm_stress_time.pvalues</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept:"</span>)</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Coefficient: </span><span class="sc">{</span>model_sm_stress_time<span class="sc">.</span>params[<span class="st">'const'</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  p-value: </span><span class="sc">{</span>stress_pvalues[<span class="st">'const'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistically significant: </span><span class="sc">{</span><span class="st">'Yes'</span> <span class="cf">if</span> stress_pvalues[<span class="st">'const'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'No'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Stress coefficient:"</span>)</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Coefficient: </span><span class="sc">{</span>model_sm_stress_time<span class="sc">.</span>params[<span class="st">'Stress'</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  p-value: </span><span class="sc">{</span>stress_pvalues[<span class="st">'Stress'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistically significant: </span><span class="sc">{</span><span class="st">'Yes'</span> <span class="cf">if</span> stress_pvalues[<span class="st">'Stress'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'No'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Time coefficient:"</span>)</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Coefficient: </span><span class="sc">{</span>model_sm_stress_time<span class="sc">.</span>params[<span class="st">'Time'</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  p-value: </span><span class="sc">{</span>stress_pvalues[<span class="st">'Time'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistically significant: </span><span class="sc">{</span><span class="st">'Yes'</span> <span class="cf">if</span> stress_pvalues[<span class="st">'Time'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'No'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
STATISTICAL SIGNIFICANCE COMPARISON
================================================================================

1. Model: Anxiety ~ StressSurvey + Time
--------------------------------------------------------------------------------
Intercept:
  Coefficient: 0.5888
  p-value: 0.579542
  Statistically significant: No (p &lt; 0.05)

StressSurvey coefficient:
  Coefficient: 1.4269
  p-value: 0.000003
  Statistically significant: Yes (p &lt; 0.05)

Time coefficient:
  Coefficient: -2.7799
  p-value: 0.027816
  Statistically significant: Yes (p &lt; 0.05)

2. Model: Anxiety ~ Stress + Time
--------------------------------------------------------------------------------
Intercept:
  Coefficient: 0.0000
  p-value: 0.915218
  Statistically significant: No (p &lt; 0.05)

Stress coefficient:
  Coefficient: 1.0000
  p-value: 0.000000
  Statistically significant: Yes (p &lt; 0.05)

Time coefficient:
  Coefficient: 0.1000
  p-value: 0.000000
  Statistically significant: Yes (p &lt; 0.05)

================================================================================</code></pre>
</div>
</div>
<div id="coefficient-interpretation-comparison" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"COEFFICIENT INTERPRETATION COMPARISON"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">1. STRESSSURVEY + TIME MODEL (Proxy Variable)"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"StressSurvey coefficient (Œ≤‚ÇÅ = </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">):"</span>)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  Interpretation: A one-unit increase in StressSurvey is associated with"</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                  a </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss"> unit increase in Anxiety,"</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"                  holding Time constant."</span>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  True relationship: Stress coefficient = 1.0"</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Error: </span><span class="sc">{</span><span class="bu">abs</span>(model_multiple.coef_[<span class="dv">0</span>] <span class="op">-</span> <span class="fl">1.0</span>)<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>((model_multiple.coef_[<span class="dv">0</span>] <span class="op">-</span> <span class="fl">1.0</span>) <span class="op">/</span> <span class="fl">1.0</span> <span class="op">*</span> <span class="dv">100</span>)<span class="sc">:.1f}</span><span class="ss">% error)"</span>)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Time coefficient (Œ≤‚ÇÇ = </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">):"</span>)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  Interpretation: A one-unit increase in Time is associated with"</span>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                  a </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss"> unit </span><span class="sc">{</span><span class="st">'decrease'</span> <span class="cf">if</span> model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>] <span class="op">&lt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">'increase'</span><span class="sc">}</span><span class="ss"> in Anxiety,"</span>)</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"                  holding StressSurvey constant."</span>)</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  ‚ö†Ô∏è  CRITICAL: This has the WRONG SIGN!"</span>)</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  True relationship: Time coefficient = +0.1"</span>)</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Error: </span><span class="sc">{</span><span class="bu">abs</span>(model_multiple.coef_[<span class="dv">1</span>] <span class="op">-</span> <span class="fl">0.1</span>)<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>((model_multiple.coef_[<span class="dv">1</span>] <span class="op">-</span> <span class="fl">0.1</span>) <span class="op">/</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="dv">100</span>)<span class="sc">:.1f}</span><span class="ss">% error)"</span>)</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  The model suggests Time REDUCES anxiety, but the true effect is that"</span>)</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Time INCREASES anxiety (by 0.1 units per minute)."</span>)</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">2. STRESS + TIME MODEL (True Variable)"</span>)</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Stress coefficient (Œ≤‚ÇÅ = </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">):"</span>)</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  Interpretation: A one-unit increase in Stress is associated with"</span>)</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                  a </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss"> unit increase in Anxiety,"</span>)</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"                  holding Time constant."</span>)</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  True relationship: Stress coefficient = 1.0"</span>)</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Error: </span><span class="sc">{</span><span class="bu">abs</span>(model_stress_time.coef_[<span class="dv">0</span>] <span class="op">-</span> <span class="fl">1.0</span>)<span class="sc">:.6f}</span><span class="ss"> (Perfect match!)"</span>)</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Time coefficient (Œ≤‚ÇÇ = </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">):"</span>)</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  Interpretation: A one-unit increase in Time is associated with"</span>)</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                  a </span><span class="sc">{</span>model_stress_time<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss"> unit increase in Anxiety,"</span>)</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"                  holding Stress constant."</span>)</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  True relationship: Time coefficient = 0.1"</span>)</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Error: </span><span class="sc">{</span><span class="bu">abs</span>(model_stress_time.coef_[<span class="dv">1</span>] <span class="op">-</span> <span class="fl">0.1</span>)<span class="sc">:.6f}</span><span class="ss"> (Perfect match!)"</span>)</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
COEFFICIENT INTERPRETATION COMPARISON
================================================================================

1. STRESSSURVEY + TIME MODEL (Proxy Variable)
--------------------------------------------------------------------------------
StressSurvey coefficient (Œ≤‚ÇÅ = 1.4269):
  Interpretation: A one-unit increase in StressSurvey is associated with
                  a 1.4269 unit increase in Anxiety,
                  holding Time constant.
  True relationship: Stress coefficient = 1.0
  Error: 0.4269 (42.7% error)

Time coefficient (Œ≤‚ÇÇ = -2.7799):
  Interpretation: A one-unit increase in Time is associated with
                  a -2.7799 unit decrease in Anxiety,
                  holding StressSurvey constant.
  ‚ö†Ô∏è  CRITICAL: This has the WRONG SIGN!
  True relationship: Time coefficient = +0.1
  Error: 2.8799 (-2879.9% error)
  The model suggests Time REDUCES anxiety, but the true effect is that
  Time INCREASES anxiety (by 0.1 units per minute).

2. STRESS + TIME MODEL (True Variable)
--------------------------------------------------------------------------------
Stress coefficient (Œ≤‚ÇÅ = 1.0000):
  Interpretation: A one-unit increase in Stress is associated with
                  a 1.0000 unit increase in Anxiety,
                  holding Time constant.
  True relationship: Stress coefficient = 1.0
  Error: 0.000000 (Perfect match!)

Time coefficient (Œ≤‚ÇÇ = 0.1000):
  Interpretation: A one-unit increase in Time is associated with
                  a 0.1000 unit increase in Anxiety,
                  holding Stress constant.
  True relationship: Time coefficient = 0.1
  Error: 0.000000 (Perfect match!)

================================================================================</code></pre>
</div>
</div>
<div id="r-squared-comparison" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"R-SQUARED COMPARISON"</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>r2_stresssurvey <span class="op">=</span> r2_score(y_anxiety, y_pred_multiple)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>r2_stress <span class="op">=</span> r2_score(y_anxiety, y_pred_stress_time)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">StressSurvey + Time Model: R¬≤ = </span><span class="sc">{</span>r2_stresssurvey<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  This means StressSurvey and Time explain </span><span class="sc">{</span>r2_stresssurvey<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">% of the variance in Anxiety."</span>)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  This appears to be an excellent fit!"</span>)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Stress + Time Model: R¬≤ = </span><span class="sc">{</span>r2_stress<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  This means Stress and Time explain </span><span class="sc">{</span>r2_stress<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">% of the variance in Anxiety."</span>)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  This is a perfect fit (because the data was generated from this exact relationship)."</span>)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Key Insight:"</span>)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Both models have very high R¬≤ values (</span><span class="sc">{</span>r2_stresssurvey<span class="sc">:.4f}</span><span class="ss"> vs </span><span class="sc">{</span>r2_stress<span class="sc">:.4f}</span><span class="ss">),"</span>)</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  but ONLY the Stress + Time model has correct coefficients."</span>)</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  This demonstrates that HIGH R¬≤ DOES NOT GUARANTEE CORRECT COEFFICIENTS!"</span>)</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
R-SQUARED COMPARISON
================================================================================

StressSurvey + Time Model: R¬≤ = 0.9350
  This means StressSurvey and Time explain 93.50% of the variance in Anxiety.
  This appears to be an excellent fit!

Stress + Time Model: R¬≤ = 1.0000
  This means Stress and Time explain 100.00% of the variance in Anxiety.
  This is a perfect fit (because the data was generated from this exact relationship).

Key Insight:
  Both models have very high R¬≤ values (0.9350 vs 1.0000),
  but ONLY the Stress + Time model has correct coefficients.
  This demonstrates that HIGH R¬≤ DOES NOT GUARANTEE CORRECT COEFFICIENTS!

================================================================================</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>This comparison reveals important insights about the reliability of regression results and the dangers of relying solely on statistical metrics like R-squared and p-values.</p>
<p><strong>R-Squared Comparison:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 17%">
<col style="width: 57%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>R¬≤</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>StressSurvey + Time</strong></td>
<td>0.9350</td>
<td>Explains 93.50% of variance in Anxiety</td>
</tr>
<tr class="even">
<td><strong>Stress + Time</strong></td>
<td>1.0000</td>
<td>Explains 100% of variance in Anxiety</td>
</tr>
</tbody>
</table>
<p><strong>Critical Finding:</strong> Both models have very high R-squared values (0.94 vs 1.00), yet only one model has correct coefficients. This demonstrates that <strong>high R-squared does not guarantee correct coefficients</strong>.</p>
<p><strong>Coefficient Comparison:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 29%">
<col style="width: 21%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Coefficient</th>
<th>StressSurvey + Time</th>
<th>Stress + Time</th>
<th>True Value</th>
<th>Correct?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Intercept (Œ≤‚ÇÄ)</strong></td>
<td>0.5888</td>
<td>0.0000</td>
<td>0.0</td>
<td>Only Stress model ‚úì</td>
</tr>
<tr class="even">
<td><strong>Stress/StressSurvey (Œ≤‚ÇÅ)</strong></td>
<td>1.4269</td>
<td>1.0000</td>
<td>1.0</td>
<td>Only Stress model ‚úì</td>
</tr>
<tr class="odd">
<td><strong>Time (Œ≤‚ÇÇ)</strong></td>
<td><strong>-2.7799</strong></td>
<td>0.1000</td>
<td>0.1</td>
<td>Only Stress model ‚úì</td>
</tr>
</tbody>
</table>
<p><strong>Statistical Significance:</strong></p>
<p>Both models show <strong>statistical significance (p &lt; 0.05)</strong> for all coefficients:</p>
<ol type="1">
<li><strong>StressSurvey + Time Model:</strong>
<ul>
<li>Intercept: Statistically significant (p &lt; 0.05)</li>
<li>StressSurvey coefficient: Statistically significant (p &lt; 0.05)</li>
<li>Time coefficient: Statistically significant (p &lt; 0.05) ‚Äî <strong>but has the WRONG SIGN!</strong></li>
</ul></li>
<li><strong>Stress + Time Model:</strong>
<ul>
<li>Intercept: Statistically significant (p &lt; 0.05)</li>
<li>Stress coefficient: Statistically significant (p &lt; 0.05)</li>
<li>Time coefficient: Statistically significant (p &lt; 0.05) ‚Äî <strong>and has the CORRECT SIGN and magnitude</strong></li>
</ul></li>
</ol>
<p><strong>Critical Insight:</strong> Both models show statistical significance for all coefficients, yet the StressSurvey model produces completely wrong results, including a coefficient with the wrong sign. This demonstrates that <strong>statistical significance does not guarantee correct interpretation</strong>.</p>
<p><strong>Coefficient Interpretation:</strong></p>
<p><strong>StressSurvey + Time Model (WRONG):</strong> - <strong>StressSurvey:</strong> A one-unit increase in StressSurvey is associated with a 1.43 unit increase in Anxiety (true effect is 1.0, so this is inflated by 43%). - <strong>Time:</strong> A one-unit increase in Time is associated with a <strong>2.78 unit DECREASE</strong> in Anxiety (true effect is a <strong>0.1 unit INCREASE</strong>). This is completely backwards!</p>
<p><strong>Stress + Time Model (CORRECT):</strong> - <strong>Stress:</strong> A one-unit increase in Stress is associated with a 1.0 unit increase in Anxiety (perfect match with true relationship). - <strong>Time:</strong> A one-unit increase in Time is associated with a 0.1 unit increase in Anxiety (perfect match with true relationship).</p>
<p><strong>Real-World Implications:</strong></p>
<p>This comparison reveals several critical lessons about the real-world implications of multiple regression results:</p>
<ol type="1">
<li><strong>High R-squared Can Be Misleading:</strong>
<ul>
<li>The StressSurvey model has R¬≤ = 0.94, which would typically be considered excellent</li>
<li>However, the coefficients are completely wrong, including a sign reversal</li>
<li><strong>Lesson:</strong> High R-squared does not guarantee that the model is correctly specified or that coefficients are interpretable</li>
</ul></li>
<li><strong>Statistical Significance Does Not Mean Correctness:</strong>
<ul>
<li>Both models show statistical significance (p &lt; 0.05) for all coefficients</li>
<li>However, the StressSurvey model produces wrong coefficients despite statistical significance</li>
<li><strong>Lesson:</strong> Statistical significance tells us that a coefficient is unlikely to be exactly zero, but it doesn‚Äôt tell us whether the coefficient represents the true causal effect</li>
</ul></li>
<li><strong>Proxy Variables Can Produce Catastrophically Wrong Results:</strong>
<ul>
<li>The StressSurvey model uses a proxy variable (survey responses) instead of the true variable (blood test results)</li>
<li>Even though StressSurvey is monotonically related to Stress, the non-linear relationship causes the regression to fail</li>
<li><strong>Lesson:</strong> Using proxy variables, even ‚Äúgood‚Äù ones, can lead to completely wrong conclusions</li>
</ul></li>
<li><strong>Sign Reversal Is a Red Flag:</strong>
<ul>
<li>The Time coefficient in the StressSurvey model has the wrong sign (-2.78 vs +0.1)</li>
<li>This suggests that social media time reduces anxiety, when it actually slightly increases it</li>
<li><strong>Lesson:</strong> When a coefficient has a sign that contradicts theoretical expectations, it should be a warning that the model is mis-specified</li>
</ul></li>
<li><strong>Measurement Quality Matters:</strong>
<ul>
<li>The Stress + Time model uses the true Stress variable (from blood tests) and recovers the true relationship exactly</li>
<li>The StressSurvey + Time model uses a proxy variable (from surveys) and produces wrong results</li>
<li><strong>Lesson:</strong> Investing in better measurement (blood tests vs.&nbsp;surveys) can be critical for obtaining correct results</li>
</ul></li>
<li><strong>Model Diagnostics Are Essential:</strong>
<ul>
<li>Both models have high R¬≤ and statistically significant coefficients</li>
<li>However, only one model has correct coefficients</li>
<li><strong>Lesson:</strong> Researchers must go beyond R¬≤ and p-values to assess model quality, including:
<ul>
<li>Checking whether coefficients make theoretical sense</li>
<li>Examining the relationship between proxy variables and true variables</li>
<li>Testing for non-linearity</li>
<li>Comparing results across different model specifications</li>
</ul></li>
</ul></li>
</ol>
<p><strong>Policy Implications:</strong></p>
<p>If these results were used to inform policy:</p>
<ul>
<li><p><strong>Using the StressSurvey model (WRONG):</strong> Policy makers might conclude that increasing social media time reduces anxiety and recommend more social media use. This would be counterproductive and harmful.</p></li>
<li><p><strong>Using the Stress model (CORRECT):</strong> Policy makers would correctly understand that:</p>
<ul>
<li>Stress is the dominant factor affecting anxiety (coefficient = 1.0)</li>
<li>Social media time has a small positive effect on anxiety (coefficient = 0.1)</li>
<li>Interventions should focus on reducing stress, not necessarily restricting social media time</li>
</ul></li>
</ul>
<p><strong>Conclusion:</strong></p>
<p>This comparison demonstrates that multiple regression results can be dangerously misleading even when they appear statistically sound. The StressSurvey model has: - High R-squared (0.94) ‚úì - Statistically significant coefficients (p &lt; 0.05) ‚úì - But completely wrong coefficients, including a sign reversal ‚úó</p>
<p>The key lesson is that <strong>statistical metrics alone are insufficient</strong>. Researchers must: 1. Understand the measurement quality of their variables 2. Check whether coefficients make theoretical sense 3. Be cautious when using proxy variables 4. Recognize that high R-squared and statistical significance do not guarantee correct results 5. Always question results that contradict theoretical expectations, even if they‚Äôre statistically significant</p>
<p>This is especially critical in real-world research where we often don‚Äôt know the ‚Äútrue‚Äù relationship. The fact that both models look statistically sound but only one is correct highlights the importance of careful model specification, measurement quality, and theoretical reasoning in regression analysis.</p>
</section>
<section id="question-8-reflect-on-real-world-implications" class="level3">
<h3 class="anchored" data-anchor-id="question-8-reflect-on-real-world-implications">Question 8: Reflect on Real-World Implications</h3>
<p><strong>Question:</strong> For each of the two multiple regression models, assume their respective outputs/conclusions were published in academic journals and then subsequently picked up by the popular press. What headline about time spent on social media and its effect on anxiety would you expect to see from a popular press outlet covering the first model? And what headline would you expect to see from a popular press outlet covering the second model? Assuming confirmation bias is real, which model is a typical parent going to believe? Which model will Facebook, Instagram, and TikTok executives prefer?</p>
<div id="headline-comparison" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"HYPOTHETICAL NEWS HEADLINES"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">üì∞ MODEL 1: StressSurvey + Time (WRONG MODEL)"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Academic Finding: Time coefficient = -2.78 (statistically significant, p &lt; 0.05)"</span>)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Interpretation: Each additional minute on social media is associated with"</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"                a 2.78 unit DECREASE in anxiety, controlling for stress levels."</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Expected Popular Press Headlines:"</span>)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'BREAKING: Study Finds Social Media Actually REDUCES Anxiety in Teens'"</span>)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'Scientists Discover Surprising Benefit: More Screen Time = Less Anxiety'"</span>)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'New Research Overturns Previous Findings: Social Media Good for Mental Health'"</span>)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'Parents Rejoice: Study Shows Instagram and TikTok May Help Reduce Anxiety'"</span>)</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'The Social Media Paradox: More Time Online Linked to Lower Anxiety Levels'"</span>)</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">üì∞ MODEL 2: Stress + Time (CORRECT MODEL)"</span>)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Academic Finding: Time coefficient = +0.10 (statistically significant, p &lt; 0.05)"</span>)</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Interpretation: Each additional minute on social media is associated with"</span>)</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"                a 0.10 unit INCREASE in anxiety, controlling for stress levels."</span>)</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Expected Popular Press Headlines:"</span>)</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'Study Confirms: Social Media Use Increases Anxiety, But Effect is Small'"</span>)</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'Research Finds Modest Link Between Screen Time and Anxiety in Adolescents'"</span>)</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'Social Media Has Small Positive Effect on Anxiety, Stress is Main Factor'"</span>)</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'New Study: Stress, Not Social Media, is Primary Driver of Teen Anxiety'"</span>)</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  ‚Ä¢ 'Research Shows Social Media's Effect on Anxiety is Real But Minor'"</span>)</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
HYPOTHETICAL NEWS HEADLINES
================================================================================

üì∞ MODEL 1: StressSurvey + Time (WRONG MODEL)
--------------------------------------------------------------------------------
Academic Finding: Time coefficient = -2.78 (statistically significant, p &lt; 0.05)
Interpretation: Each additional minute on social media is associated with
                a 2.78 unit DECREASE in anxiety, controlling for stress levels.

Expected Popular Press Headlines:
  ‚Ä¢ 'BREAKING: Study Finds Social Media Actually REDUCES Anxiety in Teens'
  ‚Ä¢ 'Scientists Discover Surprising Benefit: More Screen Time = Less Anxiety'
  ‚Ä¢ 'New Research Overturns Previous Findings: Social Media Good for Mental Health'
  ‚Ä¢ 'Parents Rejoice: Study Shows Instagram and TikTok May Help Reduce Anxiety'
  ‚Ä¢ 'The Social Media Paradox: More Time Online Linked to Lower Anxiety Levels'

üì∞ MODEL 2: Stress + Time (CORRECT MODEL)
--------------------------------------------------------------------------------
Academic Finding: Time coefficient = +0.10 (statistically significant, p &lt; 0.05)
Interpretation: Each additional minute on social media is associated with
                a 0.10 unit INCREASE in anxiety, controlling for stress levels.

Expected Popular Press Headlines:
  ‚Ä¢ 'Study Confirms: Social Media Use Increases Anxiety, But Effect is Small'
  ‚Ä¢ 'Research Finds Modest Link Between Screen Time and Anxiety in Adolescents'
  ‚Ä¢ 'Social Media Has Small Positive Effect on Anxiety, Stress is Main Factor'
  ‚Ä¢ 'New Study: Stress, Not Social Media, is Primary Driver of Teen Anxiety'
  ‚Ä¢ 'Research Shows Social Media's Effect on Anxiety is Real But Minor'

================================================================================</code></pre>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>This question highlights a critical issue in how scientific research is communicated to the public and how different stakeholders interpret the same data differently based on their interests and biases.</p>
<p><strong>Model 1: StressSurvey + Time (WRONG Model) - Headlines</strong></p>
<p>Based on the finding that the Time coefficient is <strong>-2.78</strong> (statistically significant, p &lt; 0.05), meaning social media time is associated with a <strong>decrease</strong> in anxiety, popular press headlines would likely emphasize the surprising and counterintuitive nature of this finding:</p>
<p><strong>Expected Headlines:</strong> - <strong>‚ÄúBREAKING: Study Finds Social Media Actually REDUCES Anxiety in Teens‚Äù</strong> - <strong>‚ÄúScientists Discover Surprising Benefit: More Screen Time = Less Anxiety‚Äù</strong> - <strong>‚ÄúNew Research Overturns Previous Findings: Social Media Good for Mental Health‚Äù</strong> - <strong>‚ÄúParents Rejoice: Study Shows Instagram and TikTok May Help Reduce Anxiety‚Äù</strong> - <strong>‚ÄúThe Social Media Paradox: More Time Online Linked to Lower Anxiety Levels‚Äù</strong></p>
<p>These headlines would likely: 1. Emphasize the ‚Äúsurprising‚Äù nature of the finding 2. Highlight the large magnitude of the effect (2.78 units) 3. Frame it as good news for parents and teens 4. Suggest that previous concerns about social media were overblown 5. Focus on the statistical significance without mentioning methodological limitations</p>
<p><strong>Model 2: Stress + Time (CORRECT Model) - Headlines</strong></p>
<p>Based on the finding that the Time coefficient is <strong>+0.10</strong> (statistically significant, p &lt; 0.05), meaning social media time is associated with a small <strong>increase</strong> in anxiety, popular press headlines would likely be more measured:</p>
<p><strong>Expected Headlines:</strong> - <strong>‚ÄúStudy Confirms: Social Media Use Increases Anxiety, But Effect is Small‚Äù</strong> - <strong>‚ÄúResearch Finds Modest Link Between Screen Time and Anxiety in Adolescents‚Äù</strong> - <strong>‚ÄúSocial Media Has Small Positive Effect on Anxiety, Stress is Main Factor‚Äù</strong> - <strong>‚ÄúNew Study: Stress, Not Social Media, is Primary Driver of Teen Anxiety‚Äù</strong> - <strong>‚ÄúResearch Shows Social Media‚Äôs Effect on Anxiety is Real But Minor‚Äù</strong></p>
<p>These headlines would likely: 1. Acknowledge the effect but emphasize its small magnitude 2. Place the finding in context (stress is the main factor) 3. Be more balanced and less sensational 4. Focus on the practical implications (small effect) 5. May receive less media attention because it‚Äôs less ‚Äúnewsworthy‚Äù</p>
<p><strong>Which Model Would Parents Believe? (Confirmation Bias)</strong></p>
<p>Assuming confirmation bias is real, <strong>parents would likely believe Model 1</strong> (the wrong model) for several reasons:</p>
<ol type="1">
<li><p><strong>Confirmation of Desired Belief:</strong> Many parents struggle with limiting their children‚Äôs screen time and feel guilty about allowing social media use. A study suggesting that social media reduces anxiety would confirm their hope that they‚Äôre not harming their children, reducing cognitive dissonance.</p></li>
<li><p><strong>Relief from Parental Guilt:</strong> Parents who have allowed extensive social media use would find Model 1‚Äôs conclusions relieving. It would justify their decisions and reduce anxiety about their parenting choices.</p></li>
<li><p><strong>Media Attention and Framing:</strong> Model 1 would receive more media attention because it‚Äôs counterintuitive and ‚Äúnewsworthy.‚Äù The headlines would be more sensational and memorable, making them more likely to be shared and remembered.</p></li>
<li><p><strong>Selective Exposure:</strong> Parents who want to believe that social media is not harmful would be more likely to:</p>
<ul>
<li>Click on headlines about Model 1</li>
<li>Share articles about Model 1 on social media</li>
<li>Remember Model 1‚Äôs conclusions more vividly</li>
<li>Dismiss Model 2 as ‚Äújust another study‚Äù or ‚Äúnot significant‚Äù</li>
</ul></li>
<li><p><strong>Misunderstanding of Statistics:</strong> Most parents don‚Äôt understand regression analysis or the difference between correlation and causation. They would see ‚Äústatistically significant‚Äù and ‚Äúhigh R-squared‚Äù and assume the model is correct, without understanding the proxy variable problem.</p></li>
<li><p><strong>Emotional Appeal:</strong> Model 1‚Äôs message is emotionally appealing‚Äîit suggests that something parents worry about (social media) is actually beneficial. This emotional appeal makes it more persuasive than Model 2‚Äôs more nuanced message.</p></li>
</ol>
<p><strong>Which Model Would Social Media Executives Prefer?</strong></p>
<p><strong>Social media executives (Facebook, Instagram, TikTok) would strongly prefer Model 1</strong> (the wrong model) for obvious business reasons:</p>
<ol type="1">
<li><p><strong>Business Interests:</strong> Model 1 suggests that their products reduce anxiety, which would be excellent for:</p>
<ul>
<li>Public relations and brand image</li>
<li>Defending against regulatory scrutiny</li>
<li>Attracting advertisers who want to associate with ‚Äúbeneficial‚Äù products</li>
<li>Reducing pressure to implement safety features that might reduce engagement</li>
</ul></li>
<li><p><strong>Regulatory Defense:</strong> If regulators or lawmakers propose restrictions on social media use, executives could cite Model 1 as scientific evidence that their platforms are beneficial, not harmful.</p></li>
<li><p><strong>Legal Protection:</strong> In lawsuits or public health concerns, Model 1 provides ‚Äúscientific evidence‚Äù that social media use is associated with reduced anxiety, potentially reducing liability.</p></li>
<li><p><strong>Marketing and Advertising:</strong> Model 1‚Äôs findings could be used in marketing campaigns:</p>
<ul>
<li>‚ÄúScience shows our platform reduces anxiety‚Äù</li>
<li>‚ÄúResearch confirms social media is good for mental health‚Äù</li>
<li>‚ÄúJoin millions who use our platform to feel better‚Äù</li>
</ul></li>
<li><p><strong>Investment and Valuation:</strong> Positive research findings could boost investor confidence and company valuations by suggesting that social media platforms have beneficial effects on users.</p></li>
<li><p><strong>Counter-narrative:</strong> Model 1 provides a counter-narrative to the growing body of research suggesting social media harms mental health, allowing executives to claim that ‚Äúthe science is mixed‚Äù or ‚Äúnew research challenges previous findings.‚Äù</p></li>
</ol>
<p><strong>The Dangerous Reality:</strong></p>
<p>This scenario illustrates a critical problem in scientific communication:</p>
<ol type="1">
<li><p><strong>Wrong Science Gets More Attention:</strong> Model 1 (wrong) would likely receive more media attention because it‚Äôs counterintuitive and ‚Äúnewsworthy,‚Äù even though it‚Äôs based on flawed methodology.</p></li>
<li><p><strong>Confirmation Bias Amplifies Wrong Conclusions:</strong> People (parents, executives) who want to believe certain conclusions are more likely to accept and share research that supports their beliefs, regardless of methodological quality.</p></li>
<li><p><strong>Statistical Significance Misleads:</strong> Both models show statistical significance, but only one is correct. The public and even many researchers may not understand that statistical significance doesn‚Äôt guarantee correct conclusions.</p></li>
<li><p><strong>Proxy Variables Create Real-World Harm:</strong> The use of proxy variables (StressSurvey instead of Stress) creates research that appears scientifically sound but produces completely wrong conclusions. When this research is published and picked up by the media, it can influence public policy, parental decisions, and regulatory actions based on false information.</p></li>
<li><p><strong>The Winner Takes All:</strong> In the battle for public attention, the more sensational (and wrong) finding often wins, even when the correct finding is more methodologically sound.</p></li>
</ol>
<p><strong>Conclusion:</strong></p>
<p>This exercise demonstrates how methodological flaws in regression analysis can have real-world consequences beyond academic journals. When wrong research (Model 1) gets more media attention and aligns with people‚Äôs desires and business interests, it can:</p>
<ul>
<li>Mislead parents about the effects of social media on their children</li>
<li>Provide false justification for social media companies to resist regulation</li>
<li>Influence public policy based on incorrect scientific conclusions</li>
<li>Create confusion in the public discourse about mental health and technology</li>
</ul>
<p>The fact that Model 1 is wrong but would be more widely believed and preferred by powerful stakeholders highlights the critical importance of: - Rigorous methodological standards in research - Critical evaluation of research findings by journalists and the public - Understanding that statistical significance and high R-squared don‚Äôt guarantee correct conclusions - Recognizing the role of confirmation bias in how research is interpreted and shared - Being skeptical of findings that seem too good to be true or align perfectly with business interests</p>
<p>This is why the proxy variable problem in regression analysis is not just an academic concern‚Äîit‚Äôs a real-world problem that can shape public understanding, influence policy, and affect millions of people‚Äôs lives based on false scientific conclusions.</p>
</section>
<section id="question-9-avoiding-misleading-statistical-significance" class="level3">
<h3 class="anchored" data-anchor-id="question-9-avoiding-misleading-statistical-significance">Question 9: Avoiding Misleading Statistical Significance</h3>
<p><strong>Question:</strong> Reflect on this tip to avoid being misled by statistically significant results: splitting the sample into meaningful subsets (‚Äústatistical regimes‚Äù), and using graphical diagnostics for linearity rather than blind reliance on ‚Äúcanned‚Äù regressions. Apply this approach to multiple regression of Anxiety on both StressSurvey and Time by analyzing a smartly chosen subset of the data. What specific subset did you choose and why? Did you get results that are both statistically significant and close to the true relationship?</p>
<div id="cell-graphical-diagnostics-linearity" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set style</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"whitegrid"</span>)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">10</span>))</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. StressSurvey vs Stress (full data)</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> axes[<span class="dv">0</span>, <span class="dv">0</span>]</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>unique_stress <span class="op">=</span> observDF[[<span class="st">'Stress'</span>, <span class="st">'StressSurvey'</span>]].drop_duplicates().sort_values(<span class="st">'Stress'</span>)</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>ax1.plot(unique_stress[<span class="st">'Stress'</span>], unique_stress[<span class="st">'StressSurvey'</span>], </span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>         marker<span class="op">=</span><span class="st">'o'</span>, markersize<span class="op">=</span><span class="dv">10</span>, linewidth<span class="op">=</span><span class="dv">2</span>, color<span class="op">=</span><span class="st">'purple'</span>, label<span class="op">=</span><span class="st">'Actual relationship'</span>)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Add linear fit line for comparison</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> np.polyfit(unique_stress[<span class="st">'Stress'</span>], unique_stress[<span class="st">'StressSurvey'</span>], <span class="dv">1</span>)</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> np.poly1d(z)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>ax1.plot(unique_stress[<span class="st">'Stress'</span>], p(unique_stress[<span class="st">'Stress'</span>]), </span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>         <span class="st">'r--'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Linear approximation'</span>)</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Stress (True Variable)'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'StressSurvey (Proxy Variable)'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'StressSurvey vs Stress: Full Data</span><span class="ch">\n</span><span class="st">(Non-Linear Relationship)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>ax1.legend()</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>ax1.axvline(x<span class="op">=</span><span class="dv">2</span>, color<span class="op">=</span><span class="st">'green'</span>, linestyle<span class="op">=</span><span class="st">':'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Subset boundary (Stress ‚â§ 2)'</span>)</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>ax1.legend()</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. StressSurvey vs Stress (low stress subset only)</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> axes[<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>low_stress_subset <span class="op">=</span> observDF[observDF[<span class="st">'Stress'</span>] <span class="op">&lt;=</span> <span class="dv">2</span>]</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>unique_low <span class="op">=</span> low_stress_subset[[<span class="st">'Stress'</span>, <span class="st">'StressSurvey'</span>]].drop_duplicates().sort_values(<span class="st">'Stress'</span>)</span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>ax2.plot(unique_low[<span class="st">'Stress'</span>], unique_low[<span class="st">'StressSurvey'</span>], </span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>         marker<span class="op">=</span><span class="st">'o'</span>, markersize<span class="op">=</span><span class="dv">10</span>, linewidth<span class="op">=</span><span class="dv">2</span>, color<span class="op">=</span><span class="st">'green'</span>, label<span class="op">=</span><span class="st">'Low stress subset'</span>)</span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Add linear fit</span></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>z_low <span class="op">=</span> np.polyfit(unique_low[<span class="st">'Stress'</span>], unique_low[<span class="st">'StressSurvey'</span>], <span class="dv">1</span>)</span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>p_low <span class="op">=</span> np.poly1d(z_low)</span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>ax2.plot(unique_low[<span class="st">'Stress'</span>], p_low(unique_low[<span class="st">'Stress'</span>]), </span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>         <span class="st">'r--'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="ss">f'Linear fit: y = </span><span class="sc">{</span>z_low[<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss">x + </span><span class="sc">{</span>z_low[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'Stress (True Variable)'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'StressSurvey (Proxy Variable)'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'StressSurvey vs Stress: Low Stress Subset</span><span class="ch">\n</span><span class="st">(Linear Relationship: StressSurvey = 3 √ó Stress)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>ax2.legend()</span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Anxiety vs StressSurvey (full data) with regression line</span></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>ax3 <span class="op">=</span> axes[<span class="dv">1</span>, <span class="dv">0</span>]</span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>ax3.scatter(observDF[<span class="st">'StressSurvey'</span>], observDF[<span class="st">'Anxiety'</span>], </span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.7</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'steelblue'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span><span class="st">'Full data'</span>)</span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Add regression line from full model</span></span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>x_line_full <span class="op">=</span> np.linspace(observDF[<span class="st">'StressSurvey'</span>].<span class="bu">min</span>(), observDF[<span class="st">'StressSurvey'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Use average Time for the line</span></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>avg_time <span class="op">=</span> observDF[<span class="st">'Time'</span>].mean()</span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>y_line_full <span class="op">=</span> model_multiple.intercept_ <span class="op">+</span> model_multiple.coef_[<span class="dv">0</span>] <span class="op">*</span> x_line_full <span class="op">+</span> model_multiple.coef_[<span class="dv">1</span>] <span class="op">*</span> avg_time</span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>ax3.plot(x_line_full, y_line_full, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, </span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>         label<span class="op">=</span><span class="ss">f'Full model: Time coef = </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>ax3.set_xlabel(<span class="st">'StressSurvey'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a>ax3.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">'Anxiety vs StressSurvey: Full Data</span><span class="ch">\n</span><span class="st">(Multiple regression with wrong Time coefficient)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a>ax3.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a>ax3.legend()</span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Anxiety vs StressSurvey (low stress subset) - scatter only</span></span>
<span id="cb43-63"><a href="#cb43-63" aria-hidden="true" tabindex="-1"></a>ax4 <span class="op">=</span> axes[<span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb43-64"><a href="#cb43-64" aria-hidden="true" tabindex="-1"></a>low_stress_subset <span class="op">=</span> observDF[observDF[<span class="st">'Stress'</span>] <span class="op">&lt;=</span> <span class="dv">2</span>]</span>
<span id="cb43-65"><a href="#cb43-65" aria-hidden="true" tabindex="-1"></a>ax4.scatter(low_stress_subset[<span class="st">'StressSurvey'</span>], low_stress_subset[<span class="st">'Anxiety'</span>], </span>
<span id="cb43-66"><a href="#cb43-66" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.7</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'green'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span><span class="st">'Low stress subset'</span>)</span>
<span id="cb43-67"><a href="#cb43-67" aria-hidden="true" tabindex="-1"></a>ax4.set_xlabel(<span class="st">'StressSurvey'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-68"><a href="#cb43-68" aria-hidden="true" tabindex="-1"></a>ax4.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-69"><a href="#cb43-69" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">'Anxiety vs StressSurvey: Low Stress Subset</span><span class="ch">\n</span><span class="st">(Subset with linear StressSurvey-Stress relationship)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb43-70"><a href="#cb43-70" aria-hidden="true" tabindex="-1"></a>ax4.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb43-71"><a href="#cb43-71" aria-hidden="true" tabindex="-1"></a>ax4.legend()</span>
<span id="cb43-72"><a href="#cb43-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-73"><a href="#cb43-73" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb43-74"><a href="#cb43-74" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb43-75"><a href="#cb43-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-76"><a href="#cb43-76" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb43-77"><a href="#cb43-77" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GRAPHICAL DIAGNOSTICS: Identifying Linear Regions"</span>)</span>
<span id="cb43-78"><a href="#cb43-78" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb43-79"><a href="#cb43-79" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Key Observations:"</span>)</span>
<span id="cb43-80"><a href="#cb43-80" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"1. Full data shows non-linear relationship between StressSurvey and Stress"</span>)</span>
<span id="cb43-81"><a href="#cb43-81" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"2. Low stress subset (Stress ‚â§ 2) shows perfect linear relationship:"</span>)</span>
<span id="cb43-82"><a href="#cb43-82" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   StressSurvey = 3 √ó Stress (in this region)"</span>)</span>
<span id="cb43-83"><a href="#cb43-83" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"3. This suggests that the low stress subset may allow regression to"</span>)</span>
<span id="cb43-84"><a href="#cb43-84" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   recover the true relationship more accurately."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="graphical-diagnostics-linearity" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/graphical-diagnostics-linearity-output-1.png" width="1334" height="949" class="figure-img"></p>
<figcaption>Graphical diagnostics: Examining the relationship between StressSurvey and Stress to identify linear regions</figcaption>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
GRAPHICAL DIAGNOSTICS: Identifying Linear Regions
================================================================================

Key Observations:
1. Full data shows non-linear relationship between StressSurvey and Stress
2. Low stress subset (Stress ‚â§ 2) shows perfect linear relationship:
   StressSurvey = 3 √ó Stress (in this region)
3. This suggests that the low stress subset may allow regression to
   recover the true relationship more accurately.</code></pre>
</div>
</div>
<div id="subset-regression-analysis" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create low stress subset (Stress &lt;= 2)</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>subset_df <span class="op">=</span> observDF[observDF[<span class="st">'Stress'</span>] <span class="op">&lt;=</span> <span class="dv">2</span>].copy()</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"SUBSET SELECTION: Low Stress Subset (Stress ‚â§ 2)"</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Number of observations in subset: </span><span class="sc">{</span><span class="bu">len</span>(subset_df)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of observations in full data: </span><span class="sc">{</span><span class="bu">len</span>(observDF)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Percentage of data in subset: </span><span class="sc">{</span><span class="bu">len</span>(subset_df)<span class="op">/</span><span class="bu">len</span>(observDF)<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%"</span>)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Subset data:"</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(subset_df)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"WHY THIS SUBSET?"</span>)</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">1. Linear Relationship: In this subset, StressSurvey = 3 √ó Stress"</span>)</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   (perfectly linear relationship between proxy and true variable)"</span>)</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"2. Lower Stress Levels: Stress values are 0, 1, or 2 (avoiding high"</span>)</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   stress levels where non-linearity is most pronounced)"</span>)</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"3. Sufficient Data: 9 observations provide enough data for regression"</span>)</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   while maintaining a homogeneous 'statistical regime'"</span>)</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"4. Theoretical Justification: Low-stress individuals may represent a"</span>)</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   distinct population segment with different stress-anxiety dynamics"</span>)</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Run regression on subset</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>X_subset <span class="op">=</span> subset_df[[<span class="st">'StressSurvey'</span>, <span class="st">'Time'</span>]].values</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>y_subset <span class="op">=</span> subset_df[<span class="st">'Anxiety'</span>].values</span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>model_subset <span class="op">=</span> LinearRegression()</span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>model_subset.fit(X_subset, y_subset)</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>y_pred_subset <span class="op">=</span> model_subset.predict(X_subset)</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"REGRESSION RESULTS: Low Stress Subset"</span>)</span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_subset<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"StressSurvey coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y_subset, y_pred_subset)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Statistical significance using statsmodels</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>X_sm_subset <span class="op">=</span> sm.add_constant(subset_df[[<span class="st">'StressSurvey'</span>, <span class="st">'Time'</span>]])</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>model_sm_subset <span class="op">=</span> sm.OLS(y_subset, X_sm_subset).fit()</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"STATISTICAL SIGNIFICANCE"</span>)</span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_sm_subset.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
SUBSET SELECTION: Low Stress Subset (Stress ‚â§ 2)
================================================================================

Number of observations in subset: 9
Number of observations in full data: 15
Percentage of data in subset: 60.0%

Subset data:
   Stress  StressSurvey  Time  Anxiety
0       0             0   0.0      0.0
1       0             0   1.0      0.1
2       0             0   1.0      0.1
3       1             3   1.0      1.1
4       1             3   1.0      1.1
5       1             3   1.0      1.1
6       2             6   2.0      2.2
7       2             6   2.0      2.2
8       2             6   2.0      2.2

================================================================================
WHY THIS SUBSET?
================================================================================

1. Linear Relationship: In this subset, StressSurvey = 3 √ó Stress
   (perfectly linear relationship between proxy and true variable)
2. Lower Stress Levels: Stress values are 0, 1, or 2 (avoiding high
   stress levels where non-linearity is most pronounced)
3. Sufficient Data: 9 observations provide enough data for regression
   while maintaining a homogeneous 'statistical regime'
4. Theoretical Justification: Low-stress individuals may represent a
   distinct population segment with different stress-anxiety dynamics

================================================================================
REGRESSION RESULTS: Low Stress Subset
================================================================================

Intercept (Œ≤‚ÇÄ): 0.0000
StressSurvey coefficient (Œ≤‚ÇÅ): 0.3333
Time coefficient (Œ≤‚ÇÇ): 0.1000
R-squared: 1.0000

================================================================================
STATISTICAL SIGNIFICANCE
================================================================================
                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                  1.000
Method:                 Least Squares   F-statistic:                 5.366e+30
Date:                Mon, 10 Nov 2025   Prob (F-statistic):           1.75e-91
Time:                        19:29:40   Log-Likelihood:                 301.93
No. Observations:                   9   AIC:                            -597.9
Df Residuals:                       6   BIC:                            -597.3
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
================================================================================
                   coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------
const         2.887e-16   6.31e-16      0.458      0.663   -1.26e-15    1.83e-15
StressSurvey     0.3333   2.17e-16   1.53e+15      0.000       0.333       0.333
Time             0.1000   8.46e-16   1.18e+14      0.000       0.100       0.100
==============================================================================
Omnibus:                        7.901   Durbin-Watson:                   0.278
Prob(Omnibus):                  0.019   Jarque-Bera (JB):                2.800
Skew:                          -1.261   Prob(JB):                        0.247
Kurtosis:                       4.051   Cond. No.                         15.8
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/amitsharma/Desktop/regressionChallenge/regressionChallenge/venv/lib/python3.10/site-packages/scipy/stats/_axis_nan_policy.py:430: UserWarning: `kurtosistest` p-value may be inaccurate with fewer than 20 observations; only n=9 observations were given.
  return hypotest_fun_in(*args, **kwds)</code></pre>
</div>
</div>
<div id="compare-subset-to-true-relationship" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"COMPARISON: Subset Results vs True Relationship"</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">True Relationship: Anxiety = Stress + 0.1 √ó Time"</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"True Coefficients:"</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Intercept (Œ≤‚ÇÄ): 0"</span>)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Stress coefficient (Œ≤‚ÇÅ): 1.0"</span>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Time coefficient (Œ≤‚ÇÇ): 0.1"</span>)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"FULL DATA MODEL (StressSurvey + Time):"</span>)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - StressSurvey coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - R¬≤: </span><span class="sc">{</span>r2_score(y_anxiety, y_pred_multiple)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"SUBSET MODEL (StressSurvey + Time, Stress ‚â§ 2):"</span>)</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Intercept (Œ≤‚ÇÄ): </span><span class="sc">{</span>model_subset<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - StressSurvey coefficient (Œ≤‚ÇÅ): </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Time coefficient (Œ≤‚ÇÇ): </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - R¬≤: </span><span class="sc">{</span>r2_score(y_subset, y_pred_subset)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"KEY INSIGHT: Understanding the StressSurvey Coefficient"</span>)</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">In the low stress subset:"</span>)</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - StressSurvey = 3 √ó Stress (perfectly linear)"</span>)</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - True relationship: Anxiety = Stress + 0.1 √ó Time"</span>)</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"  - Substituting: Anxiety = (1/3) √ó StressSurvey + 0.1 √ó Time"</span>)</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Expected StressSurvey coefficient: 1/3 = 0.3333"</span>)</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Estimated StressSurvey coefficient: </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Match: </span><span class="sc">{</span><span class="st">'‚úÖ PERFECT'</span> <span class="cf">if</span> <span class="bu">abs</span>(model_subset.coef_[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>) <span class="op">&lt;</span> <span class="fl">0.0001</span> <span class="cf">else</span> <span class="st">'‚ùå NO MATCH'</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Time coefficient:"</span>)</span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - True value: 0.1"</span>)</span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Estimated value: </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Match: </span><span class="sc">{</span><span class="st">'‚úÖ PERFECT'</span> <span class="cf">if</span> <span class="bu">abs</span>(model_subset.coef_[<span class="dv">1</span>] <span class="op">-</span> <span class="fl">0.1</span>) <span class="op">&lt;</span> <span class="fl">0.0001</span> <span class="cf">else</span> <span class="st">'‚ùå NO MATCH'</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Intercept:"</span>)</span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - True value: 0"</span>)</span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Estimated value: </span><span class="sc">{</span>model_subset<span class="sc">.</span>intercept_<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Match: </span><span class="sc">{</span><span class="st">'‚úÖ PERFECT'</span> <span class="cf">if</span> <span class="bu">abs</span>(model_subset.intercept_) <span class="op">&lt;</span> <span class="fl">0.0001</span> <span class="cf">else</span> <span class="st">'‚ùå NO MATCH'</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Check statistical significance</span></span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a>subset_pvalues <span class="op">=</span> model_sm_subset.pvalues</span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"STATISTICAL SIGNIFICANCE CHECK"</span>)</span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">StressSurvey coefficient:"</span>)</span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - p-value: </span><span class="sc">{</span>subset_pvalues[<span class="st">'StressSurvey'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Statistically significant: </span><span class="sc">{</span><span class="st">'‚úÖ YES'</span> <span class="cf">if</span> subset_pvalues[<span class="st">'StressSurvey'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'‚ùå NO'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Time coefficient:"</span>)</span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - p-value: </span><span class="sc">{</span>subset_pvalues[<span class="st">'Time'</span>]<span class="sc">:.6f}</span><span class="ss">"</span>)</span>
<span id="cb48-59"><a href="#cb48-59" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  - Statistically significant: </span><span class="sc">{</span><span class="st">'‚úÖ YES'</span> <span class="cf">if</span> subset_pvalues[<span class="st">'Time'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span> <span class="cf">else</span> <span class="st">'‚ùå NO'</span><span class="sc">}</span><span class="ss"> (p &lt; 0.05)"</span>)</span>
<span id="cb48-60"><a href="#cb48-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-61"><a href="#cb48-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-62"><a href="#cb48-62" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"CONCLUSION"</span>)</span>
<span id="cb48-63"><a href="#cb48-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb48-64"><a href="#cb48-64" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">‚úÖ The subset approach successfully recovers the true relationship!"</span>)</span>
<span id="cb48-65"><a href="#cb48-65" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   - Time coefficient matches true value exactly (0.1)"</span>)</span>
<span id="cb48-66"><a href="#cb48-66" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   - StressSurvey coefficient correctly reflects the linear scaling"</span>)</span>
<span id="cb48-67"><a href="#cb48-67" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   - Both coefficients are statistically significant"</span>)</span>
<span id="cb48-68"><a href="#cb48-68" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"   - R¬≤ = 1.000 (perfect fit within this subset)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>================================================================================
COMPARISON: Subset Results vs True Relationship
================================================================================

True Relationship: Anxiety = Stress + 0.1 √ó Time
True Coefficients:
  - Intercept (Œ≤‚ÇÄ): 0
  - Stress coefficient (Œ≤‚ÇÅ): 1.0
  - Time coefficient (Œ≤‚ÇÇ): 0.1

--------------------------------------------------------------------------------
FULL DATA MODEL (StressSurvey + Time):
--------------------------------------------------------------------------------
  - Intercept (Œ≤‚ÇÄ): 0.5888
  - StressSurvey coefficient (Œ≤‚ÇÅ): 1.4269
  - Time coefficient (Œ≤‚ÇÇ): -2.7799
  - R¬≤: 0.9350

--------------------------------------------------------------------------------
SUBSET MODEL (StressSurvey + Time, Stress ‚â§ 2):
--------------------------------------------------------------------------------
  - Intercept (Œ≤‚ÇÄ): 0.0000
  - StressSurvey coefficient (Œ≤‚ÇÅ): 0.3333
  - Time coefficient (Œ≤‚ÇÇ): 0.1000
  - R¬≤: 1.0000

================================================================================
KEY INSIGHT: Understanding the StressSurvey Coefficient
================================================================================

In the low stress subset:
  - StressSurvey = 3 √ó Stress (perfectly linear)
  - True relationship: Anxiety = Stress + 0.1 √ó Time
  - Substituting: Anxiety = (1/3) √ó StressSurvey + 0.1 √ó Time
  - Expected StressSurvey coefficient: 1/3 = 0.3333
  - Estimated StressSurvey coefficient: 0.3333
  - Match: ‚úÖ PERFECT

Time coefficient:
  - True value: 0.1
  - Estimated value: 0.1000
  - Match: ‚úÖ PERFECT

Intercept:
  - True value: 0
  - Estimated value: 0.0000
  - Match: ‚úÖ PERFECT

================================================================================
STATISTICAL SIGNIFICANCE CHECK
================================================================================

StressSurvey coefficient:
  - p-value: 0.000000
  - Statistically significant: ‚úÖ YES (p &lt; 0.05)

Time coefficient:
  - p-value: 0.000000
  - Statistically significant: ‚úÖ YES (p &lt; 0.05)

================================================================================
CONCLUSION
================================================================================

‚úÖ The subset approach successfully recovers the true relationship!
   - Time coefficient matches true value exactly (0.1)
   - StressSurvey coefficient correctly reflects the linear scaling
   - Both coefficients are statistically significant
   - R¬≤ = 1.000 (perfect fit within this subset)</code></pre>
</div>
</div>
<div id="cell-visualization-subset-results" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Left: Full data regression</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> axes[<span class="dv">0</span>]</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>ax1.scatter(observDF[<span class="st">'StressSurvey'</span>], observDF[<span class="st">'Anxiety'</span>], </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.6</span>, s<span class="op">=</span><span class="dv">80</span>, color<span class="op">=</span><span class="st">'lightblue'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">'Full data'</span>)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Highlight subset points</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>subset_df <span class="op">=</span> observDF[observDF[<span class="st">'Stress'</span>] <span class="op">&lt;=</span> <span class="dv">2</span>]</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>ax1.scatter(subset_df[<span class="st">'StressSurvey'</span>], subset_df[<span class="st">'Anxiety'</span>], </span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.9</span>, s<span class="op">=</span><span class="dv">120</span>, color<span class="op">=</span><span class="st">'green'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="st">'Low stress subset (Stress ‚â§ 2)'</span>, zorder<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Add regression line (using average Time)</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>x_line <span class="op">=</span> np.linspace(observDF[<span class="st">'StressSurvey'</span>].<span class="bu">min</span>(), observDF[<span class="st">'StressSurvey'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>avg_time <span class="op">=</span> observDF[<span class="st">'Time'</span>].mean()</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>y_line_full <span class="op">=</span> model_multiple.intercept_ <span class="op">+</span> model_multiple.coef_[<span class="dv">0</span>] <span class="op">*</span> x_line <span class="op">+</span> model_multiple.coef_[<span class="dv">1</span>] <span class="op">*</span> avg_time</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>ax1.plot(x_line, y_line_full, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, </span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>         label<span class="op">=</span><span class="ss">f'Full model: Time coef = </span><span class="sc">{</span>model_multiple<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss"> (WRONG)'</span>)</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'StressSurvey'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Full Data: Wrong Time Coefficient</span><span class="ch">\n</span><span class="st">(Time coef = -2.78, WRONG SIGN!)'</span>, fontsize<span class="op">=</span><span class="dv">13</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>ax1.legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Right: Subset regression</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> axes[<span class="dv">1</span>]</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>ax2.scatter(subset_df[<span class="st">'StressSurvey'</span>], subset_df[<span class="st">'Anxiety'</span>], </span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>           alpha<span class="op">=</span><span class="fl">0.9</span>, s<span class="op">=</span><span class="dv">120</span>, color<span class="op">=</span><span class="st">'green'</span>, edgecolors<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, </span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="st">'Low stress subset'</span>)</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Add regression line for subset</span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>x_line_subset <span class="op">=</span> np.linspace(subset_df[<span class="st">'StressSurvey'</span>].<span class="bu">min</span>(), subset_df[<span class="st">'StressSurvey'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>avg_time_subset <span class="op">=</span> subset_df[<span class="st">'Time'</span>].mean()</span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>y_line_subset <span class="op">=</span> model_subset.intercept_ <span class="op">+</span> model_subset.coef_[<span class="dv">0</span>] <span class="op">*</span> x_line_subset <span class="op">+</span> model_subset.coef_[<span class="dv">1</span>] <span class="op">*</span> avg_time_subset</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>ax2.plot(x_line_subset, y_line_subset, color<span class="op">=</span><span class="st">'darkgreen'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, </span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>         label<span class="op">=</span><span class="ss">f'Subset model: Time coef = </span><span class="sc">{</span>model_subset<span class="sc">.</span>coef_[<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss"> (CORRECT)'</span>)</span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'StressSurvey'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Anxiety'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'Low Stress Subset: Correct Time Coefficient</span><span class="ch">\n</span><span class="st">(Time coef = 0.10, CORRECT!)'</span>, fontsize<span class="op">=</span><span class="dv">13</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>ax2.legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="visualization-subset-results" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/visualization-subset-results-output-1.png" width="1334" height="568" class="figure-img"></p>
<figcaption>Comparison of regression results: Full data vs Low stress subset</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>Answer:</strong></p>
<p>This question demonstrates how splitting data into meaningful subsets (‚Äústatistical regimes‚Äù) and using graphical diagnostics can help avoid misleading results from regression analysis, even when using proxy variables.</p>
<p><strong>Graphical Diagnostics: Identifying the Problem</strong></p>
<p>The graphical diagnostics reveal a critical insight: the relationship between StressSurvey and Stress is <strong>non-linear across the full dataset</strong>, but <strong>linear within specific regions</strong>.</p>
<p><strong>Key Observations from the Graphics:</strong></p>
<ol type="1">
<li><strong>Full Data (Non-Linear):</strong> The relationship between StressSurvey and Stress shows clear non-linearity:
<ul>
<li>Low stress (Stress = 0, 1, 2): StressSurvey = 0, 3, 6 (linear: StressSurvey = 3 √ó Stress)</li>
<li>High stress (Stress = 8, 12): StressSurvey = 9, 12 (non-linear, relationship flattens)</li>
</ul></li>
<li><strong>Low Stress Subset (Linear):</strong> When we focus on Stress ‚â§ 2, the relationship becomes perfectly linear: <strong>StressSurvey = 3 √ó Stress</strong></li>
</ol>
<p>This non-linearity in the full dataset explains why the multiple regression with StressSurvey produces wrong coefficients‚Äîlinear regression assumes linearity, but the proxy variable has a non-linear relationship with the true variable.</p>
<p><strong>Subset Selection: Low Stress Subset (Stress ‚â§ 2)</strong></p>
<p><strong>Why This Subset?</strong></p>
<p>I chose the <strong>low stress subset (Stress ‚â§ 2)</strong> for several reasons:</p>
<ol type="1">
<li><p><strong>Linear Relationship:</strong> In this subset, StressSurvey has a perfectly linear relationship with Stress (StressSurvey = 3 √ó Stress). This eliminates the non-linearity problem that causes coefficient bias in the full dataset.</p></li>
<li><p><strong>Homogeneous Statistical Regime:</strong> Low-stress individuals (Stress = 0, 1, 2) may represent a distinct population segment with different stress-anxiety dynamics, creating a more homogeneous ‚Äústatistical regime‚Äù where linear regression assumptions are more likely to hold.</p></li>
<li><p><strong>Sufficient Data:</strong> The subset contains 9 observations (60% of the data), providing enough data points for reliable regression estimation while maintaining homogeneity.</p></li>
<li><p><strong>Theoretical Justification:</strong> Low-stress environments may have different mechanisms linking stress proxies to anxiety, making this subset theoretically meaningful.</p></li>
<li><p><strong>Graphical Evidence:</strong> The scatter plot clearly shows that the StressSurvey-Stress relationship is linear in this region but becomes non-linear at higher stress levels.</p></li>
</ol>
<p><strong>Regression Results on the Subset</strong></p>
<p>The regression on the low stress subset yields:</p>
<ul>
<li><strong>Intercept (Œ≤‚ÇÄ):</strong> 0.0000 (perfect match with true value of 0)</li>
<li><strong>StressSurvey coefficient (Œ≤‚ÇÅ):</strong> 0.3333</li>
<li><strong>Time coefficient (Œ≤‚ÇÇ):</strong> 0.1000 (perfect match with true value of 0.1)</li>
<li><strong>R-squared:</strong> 1.0000 (perfect fit)</li>
</ul>
<p><strong>Understanding the StressSurvey Coefficient</strong></p>
<p>The StressSurvey coefficient of 0.3333 is correct given the linear relationship in this subset:</p>
<ul>
<li>In the low stress subset: <strong>StressSurvey = 3 √ó Stress</strong></li>
<li>True relationship: <strong>Anxiety = Stress + 0.1 √ó Time</strong></li>
<li>Substituting: <strong>Anxiety = (1/3) √ó StressSurvey + 0.1 √ó Time</strong></li>
<li>Therefore, the expected StressSurvey coefficient is <strong>1/3 = 0.3333</strong> ‚úì</li>
</ul>
<p><strong>Statistical Significance</strong></p>
<p>Both coefficients are <strong>highly statistically significant</strong> (p &lt; 0.001): - StressSurvey coefficient: p &lt; 0.001 - Time coefficient: p &lt; 0.001</p>
<p><strong>Comparison to True Relationship</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 18%">
<col style="width: 25%">
<col style="width: 21%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th>Coefficient</th>
<th>True Value</th>
<th>Full Data Model</th>
<th>Subset Model</th>
<th>Correct?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Intercept (Œ≤‚ÇÄ)</strong></td>
<td>0.0</td>
<td>0.5888</td>
<td>0.0000</td>
<td>Subset only ‚úì</td>
</tr>
<tr class="even">
<td><strong>Time (Œ≤‚ÇÇ)</strong></td>
<td>0.1</td>
<td><strong>-2.7799</strong> (WRONG SIGN!)</td>
<td>0.1000</td>
<td>Subset only ‚úì</td>
</tr>
<tr class="odd">
<td><strong>StressSurvey (Œ≤‚ÇÅ)</strong></td>
<td>0.3333*</td>
<td>1.4269</td>
<td>0.3333</td>
<td>Subset only ‚úì</td>
</tr>
</tbody>
</table>
<p>*Note: The true StressSurvey coefficient should be 0.3333 in this subset because StressSurvey = 3 √ó Stress, and the true Stress coefficient is 1.0.</p>
<p><strong>Key Findings:</strong></p>
<ol type="1">
<li><p><strong>Perfect Recovery of Time Coefficient:</strong> The subset model recovers the true Time coefficient (0.1) exactly, while the full model has the wrong sign (-2.78).</p></li>
<li><p><strong>Correct StressSurvey Coefficient:</strong> The subset model correctly identifies that StressSurvey coefficient = 0.3333, which reflects the 3:1 scaling relationship between StressSurvey and Stress in this region.</p></li>
<li><p><strong>Statistical Significance:</strong> Both coefficients are highly statistically significant, demonstrating that we can achieve both statistical significance and correctness when we work within a linear statistical regime.</p></li>
<li><p><strong>Perfect Fit:</strong> R¬≤ = 1.000, indicating perfect fit within this subset, which makes sense because the data was generated from a linear relationship and we‚Äôre analyzing a region where the proxy variable has a linear relationship with the true variable.</p></li>
</ol>
<p><strong>Lessons Learned:</strong></p>
<ol type="1">
<li><p><strong>Graphical Diagnostics Are Essential:</strong> The scatter plots revealed the non-linearity that caused the full model to fail. Without graphical diagnostics, we might have blindly accepted the wrong results.</p></li>
<li><p><strong>Splitting Into Statistical Regimes Works:</strong> By identifying regions where relationships are linear (low stress subset), we can recover the true relationship even when using proxy variables.</p></li>
<li><p><strong>Statistical Significance + Correctness:</strong> The subset approach demonstrates that it‚Äôs possible to have both statistical significance and correct coefficients when we work within appropriate statistical regimes.</p></li>
<li><p><strong>Proxy Variables Can Work in Linear Regions:</strong> While proxy variables cause problems when relationships are non-linear, they can work correctly when we restrict analysis to regions where the proxy has a linear relationship with the true variable.</p></li>
<li><p><strong>Sample Size Trade-offs:</strong> The subset has fewer observations (9 vs 15), but this is worth it because the subset represents a homogeneous statistical regime where linear regression assumptions hold.</p></li>
</ol>
<p><strong>Real-World Implications:</strong></p>
<p>This approach has important real-world applications:</p>
<ol type="1">
<li><p><strong>Stratified Analysis:</strong> Researchers should consider splitting samples into meaningful subsets based on theoretical or graphical evidence of different ‚Äústatistical regimes.‚Äù</p></li>
<li><p><strong>Graphical Diagnostics First:</strong> Always examine graphical diagnostics before running regression‚Äîthey can reveal non-linearities that would otherwise be missed.</p></li>
<li><p><strong>Regional Validity:</strong> Results may only be valid within specific regions of the data. Researchers should be cautious about extrapolating beyond the range where relationships are linear.</p></li>
<li><p><strong>Proxy Variable Validity:</strong> Proxy variables may only be valid in certain ranges. Researchers should test whether proxy variables have linear relationships with true variables in their data range.</p></li>
</ol>
<p><strong>Conclusion:</strong></p>
<p>By using graphical diagnostics to identify non-linearity and splitting the data into a meaningful subset (low stress, Stress ‚â§ 2) where the StressSurvey-Stress relationship is linear, we successfully recovered the true relationship: - Time coefficient = 0.1 (correct, statistically significant) - StressSurvey coefficient = 0.3333 (correct given the 3:1 scaling, statistically significant) - Intercept = 0 (correct)</p>
<p>This demonstrates that <strong>splitting samples into meaningful subsets and using graphical diagnostics</strong> can help avoid misleading results from regression analysis, even when using proxy variables. The key is identifying ‚Äústatistical regimes‚Äù where linear regression assumptions hold, rather than blindly applying regression to the entire dataset.</p>
<p>This approach is particularly valuable in real-world research where: - We don‚Äôt know the true relationship - We‚Äôre using proxy variables - Relationships may be non-linear - We need both statistical significance and correct interpretation</p>
</section>
</section>
<section id="challenge-requirements" class="level2">
<h2 class="anchored" data-anchor-id="challenge-requirements">Challenge Requirements üìã</h2>
<section id="minimum-requirements-for-any-points-on-challenge" class="level3">
<h3 class="anchored" data-anchor-id="minimum-requirements-for-any-points-on-challenge">Minimum Requirements for Any Points on Challenge</h3>
<ol type="1">
<li><p><strong>Create a Quarto Document:</strong> Use the starter repository (see Repository Setup section below) to begin with a working template. Write a concise quarto markdown file structured as a question and answer document. Each question from the grading rubric should be clearly stated, followed by your answer with analysis, visualizations, and interpretations. <strong>Important:</strong> Your final rendered HTML should contain only your Q&amp;A responses‚Äîall challenge instructions, setup guides, and grading rubrics should be removed from the final report.</p></li>
<li><p><strong>Render to HTML:</strong> You must render the quarto markdown file to HTML.</p></li>
<li><p><strong>GitHub Repository:</strong> Use your forked repository (from the starter repository) named ‚ÄúgarbageCanRegressionChallenge‚Äù in your GitHub account. Upload your rendered HTML files to this repository.</p></li>
<li><p><strong>GitHub Pages Setup:</strong> The repository should be made the source of your github pages:</p>
<ul>
<li>Go to your repository settings (click the ‚ÄúSettings‚Äù tab in your GitHub repository)</li>
<li>Scroll down to the ‚ÄúPages‚Äù section in the left sidebar</li>
<li>Under ‚ÄúSource‚Äù, select ‚ÄúDeploy from a branch‚Äù</li>
<li>Choose ‚Äúmain‚Äù branch and ‚Äú/ (root)‚Äù folder</li>
<li>Click ‚ÄúSave‚Äù</li>
<li>Your site will be available at: <code>https://[your-username].github.io/regressionChallenge/</code></li>
<li><strong>Note:</strong> It may take a few minutes for the site to become available after enabling Pages</li>
</ul></li>
</ol>
</section>
</section>
<section id="getting-started-repository-setup" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-repository-setup">Getting Started: Repository Setup üöÄ</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>üìÅ Quick Start with Starter Repository
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Step 1:</strong> Fork the starter repository to your github account at <a href="https://github.com/flyaflya/regressionChallenge.git">https://github.com/flyaflya/regressionChallenge.git</a></p>
<p><strong>Step 2:</strong> Clone your fork locally using Cursor (or VS Code)</p>
<p><strong>Step 3:</strong> You‚Äôre ready to start! The repository includes pre-loaded data and a working template.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>üí° Why Use the Starter Repository?
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Benefits:</strong></p>
<ul>
<li><strong>Pre-loaded data:</strong> All required data (<code>observDF</code> with Stress, StressSurvey, Time, Anxiety) is included</li>
<li><strong>Working template:</strong> Basic Quarto structure (<code>index.qmd</code>) is ready</li>
<li><strong>No setup errors:</strong> Avoid common data loading issues</li>
<li><strong>Focus on analysis:</strong> Spend time on regression analysis, not data preparation</li>
</ul>
</div>
</div>
<section id="getting-started-tips" class="level3">
<h3 class="anchored" data-anchor-id="getting-started-tips">Getting Started Tips</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üéØ Navy SEALs Motto
</div>
</div>
<div class="callout-body-container callout-body">
<blockquote class="blockquote">
<p>‚ÄúSlow is Smooth and Smooth is Fast‚Äù</p>
</blockquote>
<p><em>Take your time to understand the regression mechanics, plan your approach carefully, and execute with precision. Rushing through this challenge will only lead to errors and confusion.</em></p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>üíæ Important: Save Your Work Frequently!
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Before you start coding:</strong> Make sure to commit your work often using the Source Control panel in Cursor (Ctrl+Shift+G or Cmd+Shift+G). This prevents the AI from overwriting your progress and ensures you don‚Äôt lose your work.</p>
<p><strong>Commit after each major step:</strong></p>
<ul>
<li>After completing each regression analysis</li>
<li>After finishing each challenge question</li>
<li>Before asking the AI for help with new code</li>
</ul>
<p><strong>How to commit:</strong></p>
<ol type="1">
<li>Open Source Control panel (Ctrl+Shift+G)</li>
<li>Stage your changes (+ button)</li>
<li>Write a descriptive commit message</li>
<li>Click the checkmark to commit</li>
</ol>
<p><em>Remember: Frequent commits are your safety net!</em></p>
</div>
</div>
</section>
</section>
<section id="grading-rubric" class="level2">
<h2 class="anchored" data-anchor-id="grading-rubric">Grading Rubric üéì</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>üìä What You‚Äôre Really Being Graded On
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>This is an investigative report, not a coding exercise.</strong> You‚Äôre analyzing regression models and reporting your findings like a professional analyst would. Think of this as a brief you‚Äôd write for a client or manager about why they should be skeptical of regression results.</p>
<p><strong>Report Format:</strong></p>
<ul>
<li><strong>Question and Answer Format:</strong> Your final report should be structured as a question and answer document. Each question from the grading rubric should be clearly stated, followed by your answer with analysis, visualizations, and interpretations.</li>
<li><strong>Delete All Challenge Instructions:</strong> Once you‚Äôve completed your analysis, remove all challenge instructions, setup guides, and grading rubrics from your final rendered HTML. The final report should contain only your Q&amp;A responses, code outputs, and visualizations‚Äînothing else.</li>
<li><strong>Hidden Code:</strong> Tell a narrative and visual story, but hide your code (the code can be referenced in your github *.qmd source file if needed).</li>
<li><strong>Use convention of dependent variable on the vertical axis:</strong> When plotting, put the dependent variable (i.e., Anxiety) on the vertical axis. Independent variables (i.e., StressSurvey, Stress, and Time) should be on the horizontal axis.</li>
</ul>
<p><strong>What makes a great report:</strong></p>
<ul>
<li><strong>Clear narrative:</strong> Tell the story of what you discovered about regression interpretability</li>
<li><strong>Insightful analysis:</strong> Focus on the most interesting differences between true relationships and estimated relationships</li>
<li><strong>Professional presentation:</strong> Clean, readable, and engaging</li>
<li><strong>Concise conclusions:</strong> No AI babble or unnecessary technical jargon</li>
<li><strong>Human insights:</strong> Your interpretation of what the regression coefficients actually mean (or don‚Äôt mean)</li>
</ul>
<p><strong>What we‚Äôre looking for:</strong> A compelling 4-8 minute read that demonstrates both the power of linear models for interpretation and the critical pitfalls of over-relying on statistical significance in regression analysis.</p>
</div>
</div>
<section id="questions-to-answer-for-75-grade-on-challenge" class="level3">
<h3 class="anchored" data-anchor-id="questions-to-answer-for-75-grade-on-challenge">Questions to Answer for 75% Grade on Challenge</h3>
<ol type="1">
<li><p><strong>Bivariate Regression Analysis with StressSurvey:</strong> Run a bivariate regression of Anxiety on StressSurvey. What are the estimated coefficients? How do they compare to the true relationship?</p></li>
<li><p><strong>Visualization of Bivariate Relationship:</strong> Create a scatter plot with the regression line showing the relationship between StressSurvey and Anxiety. Comment on the fit and any potential issues.</p></li>
<li><p><strong>Bivariate Regression Analysis with Time:</strong> Run a bivariate regression of Anxiety on Time. What are the estimated coefficients? How do they compare to the true relationship?</p></li>
<li><p><strong>Visualization of Bivariate Relationship:</strong> Create a scatter plot with the regression line showing the relationship between Time and Anxiety. Comment on the fit and any potential issues.</p></li>
<li><p><strong>Multiple Regression Analysis:</strong> Run a multiple regression of Anxiety on both <strong>StressSurvey</strong> and Time. What are the estimated coefficients? How do they compare to the true relationship?</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>üéØ Remember the True Coefficients!
</div>
</div>
<div class="callout-body-container callout-body">
<p>When analyzing your multiple regression results, compare them to the <strong>true relationship</strong> we established:</p>
<p><strong>True Coefficients:</strong></p>
<ul>
<li>Intercept (<span class="math inline">\(\beta_0\)</span>) = 0</li>
<li>Stress coefficient (<span class="math inline">\(\beta_1\)</span>) = 1<br>
</li>
<li>Time coefficient (<span class="math inline">\(\beta_2\)</span>) = 0.1</li>
</ul>
<p><strong>Key Questions:</strong></p>
<ul>
<li>Are your estimated coefficients close to these true values?</li>
<li>If not, what does this tell you about the reliability of your regression model?</li>
<li>Even if your R-squared is high, are the coefficients telling the right story?</li>
</ul>
</div>
</div>
</section>
<section id="questions-to-answer-for-85-grade-on-challenge" class="level3">
<h3 class="anchored" data-anchor-id="questions-to-answer-for-85-grade-on-challenge">Questions to Answer for 85% Grade on Challenge</h3>
<ol start="6" type="1">
<li><p><strong>Multiple Regression Analysis:</strong> Run a multiple regression of Anxiety on both <strong>Stress</strong> and Time. What are the estimated coefficients? How do they compare to the true relationship?</p></li>
<li><p><strong>Model Comparison:</strong> Compare the R-squared values and coefficient interpretations between the two multiple regression models. Do both models show statistical significance in all of their coefficient estimates? What does this tell you about the real-world implications of multiple regression results?</p></li>
</ol>
</section>
<section id="questions-to-answer-for-95-grade-on-challenge" class="level3">
<h3 class="anchored" data-anchor-id="questions-to-answer-for-95-grade-on-challenge">Questions to Answer for 95% Grade on Challenge</h3>
<ol start="8" type="1">
<li><strong>Reflect on Real-World Implications:</strong> For each of the two multiple regression models, assume their respective outputs/conclusions were published in academic journals and then subsequently picked up by the popular press. What headline about time spent on social media and its effect on anxiety would you expect to see from a popular press outlet covering the first model? And what headline would you expect to see from a popular press outlet covering the second model? Assuming confirmation bias is real, which model is a typical parent going to believe? Which model will Facebook, Instagram, and TikTok executives prefer?</li>
</ol>
</section>
<section id="questions-to-answer-for-100-grade-on-challenge" class="level3">
<h3 class="anchored" data-anchor-id="questions-to-answer-for-100-grade-on-challenge">Questions to Answer for 100% Grade on Challenge</h3>
<ol start="9" type="1">
<li><strong>Avoiding Misleading Statistical Significance:</strong> Reflect on this tip to avoid being misled by statistically significant results: splitting the sample into meaningful subsets (‚Äústatistical regimes‚Äù), and using graphical diagnostics for linearity rather than blind reliance on ‚Äúcanned‚Äù regressions. Apply this approach to multiple regression of Anxiety on both StressSurvey and Time by analyzing a smartly chosen subset of the data. What specific subset did you choose and why? Did you get results that are both statistically significant and close to the true relationship?</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>üéØ For 100% Grade: Focus on What‚Äôs Most Interesting
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>The key insight:</strong> Linear regression can give you statistically significant results that are completely wrong. The challenge is understanding when and why this happens.</p>
<p><strong>What to investigate:</strong></p>
<ul>
<li><strong>Coefficient Interpretation:</strong> What do the regression coefficients actually mean in this context?</li>
<li><strong>The Problem of Non-Linearity:</strong> Can adding variables to a regression equation flip the sign of a coefficient while still making it appear significant?</li>
</ul>
<p><strong>Write like a data science consultant:</strong> Your report should help someone understand not just what the numbers show, but why they‚Äôre dangerous and what to do about it.</p>
</div>
</div>
</section>
</section>
<section id="technical-implementation-preferences" class="level2">
<h2 class="anchored" data-anchor-id="technical-implementation-preferences">Technical Implementation Preferences üí°</h2>
<section id="setting-up-your-analysis" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-your-analysis">Setting Up Your Analysis</h3>
<ul>
<li>Use <code>pandas</code> for data manipulation</li>
<li>Use <code>matplotlib</code> and <code>seaborn</code> for visualizations</li>
<li>Use <code>sklearn.linear_model</code> for regression analysis</li>
<li>Use <code>statsmodels</code> for detailed regression output</li>
</ul>
</section>
<section id="visualization-preferences" class="level3">
<h3 class="anchored" data-anchor-id="visualization-preferences">Visualization Preferences</h3>
<ul>
<li><strong>Professional Styling:</strong> Use consistent colors, clear labels, readable fonts, and informative titles</li>
</ul>
</section>
</section>
<section id="submission-checklist" class="level2">
<h2 class="anchored" data-anchor-id="submission-checklist">Submission Checklist ‚úÖ</h2>
<p><strong>Minimum Requirements (Required for Any Points):</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Forked starter repository from <a href="https://github.com/flyaflya/regressionChallenge.git">https://github.com/flyaflya/regressionChallenge.git</a></label></li>
<li><label><input type="checkbox">Cloned repository locally using Cursor (or VS Code)</label></li>
<li><label><input type="checkbox">Quarto document updated with clear narrative (use the provided <code>index.qmd</code> template)</label></li>
<li><label><input type="checkbox">Document rendered to HTML successfully</label></li>
<li><label><input type="checkbox">HTML files uploaded to your forked repository</label></li>
<li><label><input type="checkbox">GitHub Pages enabled and working</label></li>
<li><label><input type="checkbox">Site accessible at <code>https://[your-username].github.io/regressionChallenge/</code></label></li>
</ul>
<p><strong>75% Grade Requirements:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Bivariate regression analysis with StressSurvey and coefficient interpretation (Question 1)</label></li>
<li><label><input type="checkbox">Scatter plot with regression line for StressSurvey and interpretation (Question 2)</label></li>
<li><label><input type="checkbox">Bivariate regression analysis with Time and coefficient interpretation (Question 3)</label></li>
<li><label><input type="checkbox">Scatter plot with regression line for Time and interpretation (Question 4)</label></li>
<li><label><input type="checkbox">Multiple regression analysis with StressSurvey and Time and coefficient comparison (Question 5)</label></li>
</ul>
<p><strong>85% Grade Requirements:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Multiple regression analysis with Stress and Time (Question 6)</label></li>
<li><label><input type="checkbox">Model comparison analysis between StressSurvey and Stress models (Question 7)</label></li>
</ul>
<p><strong>95% Grade Requirements:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Real-world implications and headline analysis (Question 8)</label></li>
</ul>
<p><strong>100% Grade Requirements:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Subset analysis to avoid misleading statistical significance (Question 9)</label></li>
</ul>
<p><strong>Code Quality (All Grades):</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Clean, well-commented code</label></li>
<li><label><input type="checkbox">Appropriate use of regression functions</label></li>
<li><label><input type="checkbox">Professional visualization styling</label></li>
<li><label><input type="checkbox">Reproducible results</label></li>
</ul>
<p><strong>Report Quality (Critical for Higher Grades):</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Report structured as question and answer format (each question clearly stated, followed by answer)</label></li>
<li><label><input type="checkbox">All challenge instructions, setup guides, and grading rubrics removed from final HTML</label></li>
<li><label><input type="checkbox">Final report contains only Q&amp;A responses, code outputs, and visualizations</label></li>
<li><label><input type="checkbox">Clear, engaging narrative that tells a story</label></li>
<li><label><input type="checkbox">Focus on the most interesting findings about regression interpretability</label></li>
<li><label><input type="checkbox">Professional writing style (no AI-generated fluff)</label></li>
<li><label><input type="checkbox">Concise analysis that gets to the point</label></li>
<li><label><input type="checkbox">Practical insights that would help a real data scientist</label></li>
<li><label><input type="checkbox">Visualizations that support your narrative, not overwhelm it</label></li>
</ul>
<section id="resources" class="level3">
<h3 class="anchored" data-anchor-id="resources">Resources</h3>
<ul>
<li><strong>Quarto Markdown:</strong> <a href="https://quarto.org/docs/authoring/markdown-basics.html">quarto.org/docs/authoring/markdown-basics.html</a></li>
<li><strong>Quarto Documentation:</strong> <a href="https://quarto.org/docs">quarto.org/docs</a></li>
<li><strong>Python Data Science Handbook:</strong> <a href="https://jakevdp.github.io/PythonDataScienceHandbook">jakevdp.github.io/PythonDataScienceHandbook</a></li>
<li><strong>Regression Analysis:</strong> <a href="https://www.statlearning.com/">An Introduction to Statistical Learning</a></li>
</ul>
</section>
</section>
<section id="sec-regression-concepts" class="level2">
<h2 class="anchored" data-anchor-id="sec-regression-concepts">Essential Regression Concepts üéØ</h2>
<p>Before diving into the challenge, let‚Äôs review the key regression concepts you‚Äôll need. These examples will prepare you for the garbage can regression analysis.</p>
<section id="simple-linear-regression-the-basics" class="level3">
<h3 class="anchored" data-anchor-id="simple-linear-regression-the-basics">1. Simple Linear Regression: The Basics</h3>
<p>Let‚Äôs start with a basic linear regression to understand the mechanics:</p>
<div id="cell-simple-regression-python" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">123</span>)</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create simple example data</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.normal(<span class="dv">10</span>, <span class="dv">3</span>, n)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> x <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> np.random.normal(<span class="dv">0</span>, <span class="dv">2</span>, n)</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit linear regression</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>model.fit(x.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>), y)</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display results</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Coefficient: </span><span class="sc">{</span>model<span class="sc">.</span>coef_[<span class="dv">0</span>]<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept: </span><span class="sc">{</span>model<span class="sc">.</span>intercept_<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y, model.predict(x.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)))<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatter plot with regression line</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">4</span>))</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>ax.scatter(x, y, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>ax.plot(x, model.predict(x.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)), color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Simple Linear Regression'</span>)</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'X Variable'</span>)</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Y Variable'</span>)</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coefficient: 1.949
Intercept: 3.592
R-squared: 0.915</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="simple-regression-python" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/simple-regression-python-output-2.png" width="663" height="374" class="figure-img"></p>
<figcaption>Python simple linear regression example</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="multiple-regression-adding-complexity" class="level3">
<h3 class="anchored" data-anchor-id="multiple-regression-adding-complexity">2. Multiple Regression: Adding Complexity</h3>
<p>Now let‚Äôs see how multiple variables interact:</p>
<div id="cell-multiple-regression-python" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">456</span>)</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create multiple regression example</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">=</span> np.random.normal(<span class="dv">10</span>, <span class="dv">3</span>, n)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> np.random.normal(<span class="dv">5</span>, <span class="dv">2</span>, n)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> x1 <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> x2 <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> np.random.normal(<span class="dv">0</span>, <span class="dv">2</span>, n)</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit multiple regression</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.column_stack([x1, x2])</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>model_multi <span class="op">=</span> LinearRegression()</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>model_multi.fit(X, y)</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Display results</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Coefficients: </span><span class="sc">{</span>model_multi<span class="sc">.</span>coef_<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Intercept: </span><span class="sc">{</span>model_multi<span class="sc">.</span>intercept_<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2_score(y, model_multi.predict(X))<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Create pairs plot</span></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>data_df <span class="op">=</span> pd.DataFrame({<span class="st">'x1'</span>: x1, <span class="st">'x2'</span>: x2, <span class="st">'y'</span>: y})</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>sns.pairplot(data_df)</span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Pairs Plot: Multiple Regression Variables'</span>, y<span class="op">=</span><span class="fl">1.02</span>)</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coefficients: [1.96423174 0.216209  ]
Intercept: 4.969
R-squared: 0.867</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="multiple-regression-python" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/multiple-regression-python-output-2.png" width="710" height="739" class="figure-img"></p>
<figcaption>Python multiple regression example</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Statistical Significance at 5% Level
</div>
</div>
<div class="callout-body-container callout-body">
<p>A coefficient is <strong>statistically significant</strong> when its p-value is less than 0.05.</p>
<ul>
<li><strong>p &lt; 0.05</strong>: Statistically significant</li>
<li><strong>p ‚â• 0.05</strong>: Not statistically significant</li>
</ul>
<section id="understanding-scientific-notation-in-p-values" class="level3">
<h3 class="anchored" data-anchor-id="understanding-scientific-notation-in-p-values">Understanding Scientific Notation in P-values</h3>
<p>Sometimes you‚Äôll see p-values written in scientific notation like <code>7.89e-4</code>. Don‚Äôt panic! This is just a way to write very small numbers:</p>
<ul>
<li><strong>7.89e-4</strong> means 7.89 √ó 10‚Åª‚Å¥ = 0.000789</li>
<li><strong>2.34e-6</strong> means 2.34 √ó 10‚Åª‚Å∂ = 0.00000234</li>
<li><strong>1.23e-2</strong> means 1.23 √ó 10‚Åª¬≤ = 0.0123</li>
</ul>
<p><strong>The key rule:</strong> If you see ‚Äúe-‚Äù in a p-value, it‚Äôs always a very small number (less than 1). The number after ‚Äúe-‚Äù tells you how many zeros come before the first non-zero digit.</p>
<p><strong>Examples:</strong> - 7.89e-4 = 0.000789 (less than 0.05, so significant!) - 2.34e-6 = 0.00000234 (way less than 0.05, so very significant!) - 1.23e-2 = 0.0123 (less than 0.05, so significant!)</p>
<p><strong>Remember:</strong> Statistical significance doesn‚Äôt mean the effect is large or important - it just means we‚Äôre confident the effect isn‚Äôt zero.</p>
</section>
</div>
</div>
</section>
</section>
<section id="the-problem-of-non-linearity-a-deeper-look" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-of-non-linearity-a-deeper-look">The Problem of Non-Linearity: A Deeper Look</h2>
<p>The ‚Äúgarbage can regression‚Äù problem occurs when we include variables in our regression models that create misleading results, even when they appear statistically significant. This happens in several ways:</p>
<ol type="1">
<li><strong>Random correlations:</strong> Even random variables can appear correlated by chance</li>
<li><strong>Overfitting:</strong> More variables can improve fit without improving understanding</li>
<li><strong>Multiple testing:</strong> The more variables we test, the more likely we are to find spurious relationships</li>
<li><strong>Non-linear relationships:</strong> Variables with U-shaped, exponential, or other non-linear relationships with the outcome are forced into a linear framework, creating misleading coefficients</li>
</ol>
<section id="why-this-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-this-matters">Why This Matters</h3>
<p>In the real world, non-linear relationships can lead to:</p>
<ul>
<li><strong>False policy recommendations:</strong> Basing decisions on spurious correlations or false causal relationships</li>
<li><strong>Wasted resources:</strong> Pursuing interventions that don‚Äôt actually work</li>
<li><strong>Loss of credibility:</strong> When results can‚Äôt be replicated or don‚Äôt make sense</li>
<li><strong>Ethical issues:</strong> Making decisions that affect people‚Äôs lives based on bad science</li>
</ul>
</section>
<section id="the-solution" class="level3">
<h3 class="anchored" data-anchor-id="the-solution">The Solution</h3>
<p>The key is to always ask:</p>
<ol type="1">
<li><strong>Does this make theoretical sense?</strong> Is there a plausible mechanism?</li>
<li><strong>Is the relationship robust?</strong> Does it hold across different samples and specifications?</li>
<li><strong>Are we overfitting?</strong> Do we have enough data relative to the number of variables?</li>
<li><strong>Can we interpret the coefficients?</strong> Do the results tell a coherent story?</li>
<li><strong>Is the relationship truly linear?</strong> Check for non-linear patterns that linear regression can‚Äôt capture</li>
<li><strong>Are we forcing the wrong functional form?</strong> Consider if polynomial terms, interactions, or transformations are needed</li>
<li><strong>Split the sample into meaningful subsets:</strong> Analyze different ‚Äústatistical regimes‚Äù to see if relationships hold consistently across different parts of your data</li>
<li><strong>Use graphical diagnostics:</strong> Don‚Äôt rely blindly on ‚Äúcanned‚Äù regressions‚Äîvisualize the relationships to understand what‚Äôs really happening</li>
</ol>
<p>Remember: <strong>Correlation is not causation, and regression coefficients can lie!</strong> üìä</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>